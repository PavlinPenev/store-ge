"use strict";(self.webpackChunkstore_ge_ui=self.webpackChunkstore_ge_ui||[]).push([[653],{1802:(g,O,_)=>{_.d(O,{T:()=>i});var i=(()=>{return(p=i||(i={}))[p.Supermarket=0]="Supermarket",p[p.ClothesShop=1]="ClothesShop",p[p.Kitchenware=2]="Kitchenware",p[p.Pharmacy=3]="Pharmacy",p[p.ConstructionMaterials=4]="ConstructionMaterials",p[p.Toys=5]="Toys",p[p.Other=6]="Other",i;var p})()},3692:(g,O,_)=>{_.d(O,{Y:()=>y});var i=_(4650),p=_(4006),q=_(8372),T=_(9300),a=_(590),c=_(325),C=_(6806),b=_(6588),f=_(8242),h=_(6895),S=_(4859),k=_(9549),A=_(4144),K=_(4850),t=_(7392),D=_(4385),L=_(3238);function B(u,d){if(1&u&&(i.TgZ(0,"mat-error"),i._uU(1),i.qZA()),2&u){const m=i.oxw();i.xp6(1),i.hij(" ",m.constants.FIELD_REQUIRED," ")}}function R(u,d){if(1&u&&(i.TgZ(0,"mat-option",13),i._uU(1),i.qZA()),2&u){const m=d.$implicit;i.Q6J("value",m.value),i.xp6(1),i.Oqu(m.name)}}function J(u,d){if(1&u&&(i.TgZ(0,"mat-error"),i._uU(1),i.qZA()),2&u){const m=i.oxw();i.xp6(1),i.hij(" ",m.constants.FIELD_REQUIRED," ")}}let y=(()=>{class u{constructor(m,P,x){this.router=m,this.storesService=P,this.bottomSheetRef=x,this.addStore=new i.vpe,this.constants=c,this.form=new p.nJ({userId:new p.p4(""),name:new p.p4("",[p.kI.required,p.kI.maxLength(c.STORE_NAME_MAX_LENGTH)]),type:new p.p4("",[p.kI.required])}),this.storeTypeConfiguration=[{name:"Supermarket",value:0},{name:"ClothesShop",value:1},{name:"Kitchenware",value:2},{name:"Pharmacy",value:3},{name:"ConstructionMaterials",value:4},{name:"Toys",value:5},{name:"Other",value:6}],this.form.get("userId")?.setValue(this.router.url.replace("/user/",""))}onAddStore(m){const P={userId:this.form.get("userId").value,name:this.form.get("name").value,type:this.form.get("type").value};this.bottomSheetRef.dismiss(),m.preventDefault(),this.storesService.addStore(P).pipe((0,q.b)(500),(0,T.h)(w=>!!w),(0,a.P)()).subscribe();let x=this.router.url;this.router.navigateByUrl("/",{skipLocationChange:!0}).then(()=>{this.router.navigate([x])})}}return u.\u0275fac=function(m){return new(m||u)(i.Y36(C.F0),i.Y36(b._),i.Y36(f.oL))},u.\u0275cmp=i.Xpm({type:u,selectors:[["app-add-store-modal"]],outputs:{addStore:"addStore"},decls:26,vars:9,consts:[[1,"form-wrapper"],[2,"margin-bottom","10px"],[3,"formGroup"],[1,"field"],["appearance","outline"],["matInput","","formControlName","name"],[4,"ngIf"],["color","primary",1,"fields-icon"],["appearance","outline",2,"width","200px"],["formControlName","type"],[3,"value",4,"ngFor","ngForOf"],[1,"button-wrapper"],["mat-raised-button","","color","primary",3,"disabled","click"],[3,"value"]],template:function(m,P){1&m&&(i.TgZ(0,"div",0)(1,"h1"),i._uU(2),i.qZA(),i._UZ(3,"mat-divider",1),i.TgZ(4,"form",2)(5,"div",3)(6,"mat-form-field",4)(7,"mat-label"),i._uU(8),i.qZA(),i._UZ(9,"input",5),i.YNc(10,B,2,1,"mat-error",6),i.qZA(),i.TgZ(11,"mat-icon",7),i._uU(12,"badge"),i.qZA()(),i.TgZ(13,"div",3)(14,"mat-form-field",8)(15,"mat-label"),i._uU(16),i.qZA(),i.TgZ(17,"mat-select",9),i.YNc(18,R,2,2,"mat-option",10),i.qZA(),i.YNc(19,J,2,1,"mat-error",6),i.qZA(),i.TgZ(20,"mat-icon",7),i._uU(21,"category"),i.qZA()(),i._UZ(22,"mat-divider"),i.TgZ(23,"div",11)(24,"button",12),i.NdJ("click",function(w){return P.onAddStore(w)}),i._uU(25),i.qZA()()()()),2&m&&(i.xp6(2),i.Oqu(P.constants.ADD_STORE),i.xp6(2),i.Q6J("formGroup",P.form),i.xp6(4),i.Oqu(P.constants.NAME),i.xp6(2),i.Q6J("ngIf",P.form.controls.name.hasError("required")),i.xp6(6),i.Oqu(P.constants.TYPE),i.xp6(2),i.Q6J("ngForOf",P.storeTypeConfiguration),i.xp6(1),i.Q6J("ngIf",P.form.controls.type.hasError("required")),i.xp6(5),i.Q6J("disabled",!P.form.valid),i.xp6(1),i.Oqu(P.constants.ADD_STORE))},dependencies:[h.sg,h.O5,S.lW,k.TO,k.KE,k.hX,A.Nt,K.d,t.Hw,D.gD,L.ey,p._Y,p.Fj,p.JJ,p.JL,p.sg,p.u],styles:[".form-wrapper[_ngcontent-%COMP%]{margin:auto;width:-moz-fit-content;width:fit-content}.form-wrapper[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]{margin-left:10px}.form-wrapper[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]   .fields-icon[_ngcontent-%COMP%]{margin-left:24px}.form-wrapper[_ngcontent-%COMP%]   .button-wrapper[_ngcontent-%COMP%]{margin-top:10px;margin-left:10px}"]}),u})()},3503:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{c:()=>DashboardPageComponent});var rxjs__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(9300),rxjs__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(590),src_app_models_store_type_enum__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(1802),src_assets_text_constants__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(325),_add_store_modal_add_store_modal_component__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(3692),_angular_core__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(4650),src_app_services_stores_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(6588),_angular_router__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(6806),_angular_material_bottom_sheet__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(8242),_angular_common__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(6895),_angular_material_button__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(4859),_angular_material_divider__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(4850),_angular_material_icon__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(7392),_angular_material_card__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(3546);function DashboardPageComponent_div_0_Template(g,O){if(1&g){const _=_angular_core__WEBPACK_IMPORTED_MODULE_2__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_2__.TgZ(0,"div",2)(1,"h1"),_angular_core__WEBPACK_IMPORTED_MODULE_2__._uU(2),_angular_core__WEBPACK_IMPORTED_MODULE_2__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_2__._UZ(3,"mat-divider"),_angular_core__WEBPACK_IMPORTED_MODULE_2__.TgZ(4,"div",3)(5,"mat-icon",4),_angular_core__WEBPACK_IMPORTED_MODULE_2__._uU(6,"store"),_angular_core__WEBPACK_IMPORTED_MODULE_2__.qZA()(),_angular_core__WEBPACK_IMPORTED_MODULE_2__._UZ(7,"mat-divider"),_angular_core__WEBPACK_IMPORTED_MODULE_2__.TgZ(8,"button",5),_angular_core__WEBPACK_IMPORTED_MODULE_2__.NdJ("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_2__.CHM(_);const p=_angular_core__WEBPACK_IMPORTED_MODULE_2__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_2__.KtG(p.addStore())}),_angular_core__WEBPACK_IMPORTED_MODULE_2__.TgZ(9,"mat-icon"),_angular_core__WEBPACK_IMPORTED_MODULE_2__._uU(10,"add_business"),_angular_core__WEBPACK_IMPORTED_MODULE_2__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_2__._uU(11),_angular_core__WEBPACK_IMPORTED_MODULE_2__.qZA()()}if(2&g){const _=_angular_core__WEBPACK_IMPORTED_MODULE_2__.oxw();_angular_core__WEBPACK_IMPORTED_MODULE_2__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_2__.Oqu(_.constants.NO_STORES_ADDED),_angular_core__WEBPACK_IMPORTED_MODULE_2__.xp6(9),_angular_core__WEBPACK_IMPORTED_MODULE_2__.hij(" ",_.constants.ADD_STORE," ")}}function DashboardPageComponent_div_1_button_8_Template(g,O){if(1&g){const _=_angular_core__WEBPACK_IMPORTED_MODULE_2__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_2__.TgZ(0,"button",11),_angular_core__WEBPACK_IMPORTED_MODULE_2__.NdJ("click",function(){const q=_angular_core__WEBPACK_IMPORTED_MODULE_2__.CHM(_).$implicit,T=_angular_core__WEBPACK_IMPORTED_MODULE_2__.oxw(2);return _angular_core__WEBPACK_IMPORTED_MODULE_2__.KtG(T.goToStorePage(q))}),_angular_core__WEBPACK_IMPORTED_MODULE_2__.TgZ(1,"mat-card")(2,"mat-card-header")(3,"mat-card-title"),_angular_core__WEBPACK_IMPORTED_MODULE_2__._uU(4),_angular_core__WEBPACK_IMPORTED_MODULE_2__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_2__.TgZ(5,"mat-card-subtitle"),_angular_core__WEBPACK_IMPORTED_MODULE_2__._uU(6),_angular_core__WEBPACK_IMPORTED_MODULE_2__.qZA()()()()}if(2&g){const _=O.$implicit,i=_angular_core__WEBPACK_IMPORTED_MODULE_2__.oxw(2);_angular_core__WEBPACK_IMPORTED_MODULE_2__.xp6(4),_angular_core__WEBPACK_IMPORTED_MODULE_2__.Oqu(_.name),_angular_core__WEBPACK_IMPORTED_MODULE_2__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_2__.Oqu(i.getStoreTypeString(_.type))}}function DashboardPageComponent_div_1_Template(g,O){if(1&g){const _=_angular_core__WEBPACK_IMPORTED_MODULE_2__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_2__.TgZ(0,"div",6)(1,"div",7)(2,"button",5),_angular_core__WEBPACK_IMPORTED_MODULE_2__.NdJ("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_2__.CHM(_);const p=_angular_core__WEBPACK_IMPORTED_MODULE_2__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_2__.KtG(p.addStore())}),_angular_core__WEBPACK_IMPORTED_MODULE_2__.TgZ(3,"mat-icon"),_angular_core__WEBPACK_IMPORTED_MODULE_2__._uU(4,"add_business"),_angular_core__WEBPACK_IMPORTED_MODULE_2__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_2__._uU(5),_angular_core__WEBPACK_IMPORTED_MODULE_2__.qZA()(),_angular_core__WEBPACK_IMPORTED_MODULE_2__._UZ(6,"mat-divider",8),_angular_core__WEBPACK_IMPORTED_MODULE_2__.TgZ(7,"div",9),_angular_core__WEBPACK_IMPORTED_MODULE_2__.YNc(8,DashboardPageComponent_div_1_button_8_Template,7,2,"button",10),_angular_core__WEBPACK_IMPORTED_MODULE_2__.qZA()()}if(2&g){const _=_angular_core__WEBPACK_IMPORTED_MODULE_2__.oxw();_angular_core__WEBPACK_IMPORTED_MODULE_2__.xp6(5),_angular_core__WEBPACK_IMPORTED_MODULE_2__.hij(" ",_.constants.ADD_STORE," "),_angular_core__WEBPACK_IMPORTED_MODULE_2__.xp6(3),_angular_core__WEBPACK_IMPORTED_MODULE_2__.Q6J("ngForOf",_.userStores)}}let DashboardPageComponent=(()=>{class DashboardPageComponent{constructor(g,O,_,i){this.storesService=g,this.route=O,this.router=_,this.addStoreBottomSheet=i,this.constants=src_assets_text_constants__WEBPACK_IMPORTED_MODULE_3__,this.userId="",this.userStores=[],this.areStoresLoading=!0}ngOnInit(){this.userId=this.route.snapshot.params.userId,this.storesService.getUserStores(this.userId).pipe((0,rxjs__WEBPACK_IMPORTED_MODULE_4__.h)(g=>!!g),(0,rxjs__WEBPACK_IMPORTED_MODULE_5__.P)()).subscribe(g=>{this.userStores=g,this.areStoresLoading=!1})}addStore(){this.addStoreBottomSheet.open(_add_store_modal_add_store_modal_component__WEBPACK_IMPORTED_MODULE_0__.Y)}goToStorePage(g){this.router.navigate(["/user",this.userId,"store",g.id])}isEmptyStateVisible(){return eval("this.userStores.length === 0")}isStoreCardContainerVisible(){return eval("this.userStores.length > 0")}getStoreTypeString(g){return src_app_models_store_type_enum__WEBPACK_IMPORTED_MODULE_6__.T[g]}}return DashboardPageComponent.\u0275fac=function g(O){return new(O||DashboardPageComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_2__.Y36(src_app_services_stores_service__WEBPACK_IMPORTED_MODULE_1__._),_angular_core__WEBPACK_IMPORTED_MODULE_2__.Y36(_angular_router__WEBPACK_IMPORTED_MODULE_7__.gz),_angular_core__WEBPACK_IMPORTED_MODULE_2__.Y36(_angular_router__WEBPACK_IMPORTED_MODULE_7__.F0),_angular_core__WEBPACK_IMPORTED_MODULE_2__.Y36(_angular_material_bottom_sheet__WEBPACK_IMPORTED_MODULE_8__.ch))},DashboardPageComponent.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_2__.Xpm({type:DashboardPageComponent,selectors:[["app-dashboard-page"]],decls:2,vars:2,consts:[["class","empty-state-container",4,"ngIf"],["class","stores-cards-container",4,"ngIf"],[1,"empty-state-container"],[1,"mat-icon-wrapper"],["color","primary"],["mat-button","",3,"click"],[1,"stores-cards-container"],[1,"add-store-button-container"],[2,"margin-bottom","20px"],[1,"store-cards-wrapper"],["class","card","mat-button","",3,"click",4,"ngFor","ngForOf"],["mat-button","",1,"card",3,"click"]],template:function g(O,_){1&O&&(_angular_core__WEBPACK_IMPORTED_MODULE_2__.YNc(0,DashboardPageComponent_div_0_Template,12,2,"div",0),_angular_core__WEBPACK_IMPORTED_MODULE_2__.YNc(1,DashboardPageComponent_div_1_Template,9,2,"div",1)),2&O&&(_angular_core__WEBPACK_IMPORTED_MODULE_2__.Q6J("ngIf",_.isEmptyStateVisible()),_angular_core__WEBPACK_IMPORTED_MODULE_2__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_2__.Q6J("ngIf",_.isStoreCardContainerVisible()))},dependencies:[_angular_common__WEBPACK_IMPORTED_MODULE_9__.sg,_angular_common__WEBPACK_IMPORTED_MODULE_9__.O5,_angular_material_button__WEBPACK_IMPORTED_MODULE_10__.lW,_angular_material_divider__WEBPACK_IMPORTED_MODULE_11__.d,_angular_material_icon__WEBPACK_IMPORTED_MODULE_12__.Hw,_angular_material_card__WEBPACK_IMPORTED_MODULE_13__.a8,_angular_material_card__WEBPACK_IMPORTED_MODULE_13__.dk,_angular_material_card__WEBPACK_IMPORTED_MODULE_13__.n5,_angular_material_card__WEBPACK_IMPORTED_MODULE_13__.$j],styles:[".empty-state-container[_ngcontent-%COMP%]{margin:100px auto auto;overflow-wrap:break-word;width:30%;border:solid 2px rgba(0,0,0,.3);border-radius:10px;padding:30px;box-shadow:3px 3px 1px 3px #888}.empty-state-container[_ngcontent-%COMP%]   mat-divider[_ngcontent-%COMP%]{margin-bottom:10px}.empty-state-container[_ngcontent-%COMP%]   .mat-icon-wrapper[_ngcontent-%COMP%]{margin-left:36%}.empty-state-container[_ngcontent-%COMP%]   .mat-icon-wrapper[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:150px}.add-store-button-container[_ngcontent-%COMP%]{display:flex;justify-content:end}.stores-cards-container[_ngcontent-%COMP%]{margin:100px auto auto;width:60%;border:solid 2px rgba(0,0,0,.3);border-radius:10px;padding:30px 30px 100px;box-shadow:3px 3px 1px 3px #888}.stores-cards-container[_ngcontent-%COMP%]   .store-cards-wrapper[_ngcontent-%COMP%]{display:inline-block}.stores-cards-container[_ngcontent-%COMP%]   .store-cards-wrapper[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{width:192px;margin-bottom:30px}.stores-cards-container[_ngcontent-%COMP%]   .store-cards-wrapper[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{display:flex;justify-content:center}"]}),DashboardPageComponent})()},6653:(g,O,_)=>{_.r(O),_.d(O,{UserModule:()=>be});var i=_(6895),p=_(5211),q=_(3503),T=_(6806),a=_(4006),c=_(7155),C=_(7579),b=_(8372),f=_(9300),h=_(590),S=(()=>{return(r=S||(S={}))[r.SingularPiece=0]="SingularPiece",r[r.Kilogram=1]="Kilogram",r[r.Litre=2]="Litre",r[r.Metre=3]="Metre",S;var r})(),k=_(1802),A=_(325),K=_(3175),t=_(4650),D=_(2779),L=_(529);let B=(()=>{class r{constructor(e){this.http=e}getStoreProducts(e){return this.http.post(D.SW,e)}getStoreAddProducts(e){return this.http.get(D.eT,{params:{storeId:e}})}sellProducts(e){return this.http.post(D.j0,e)}}return r.\u0275fac=function(e){return new(e||r)(t.LFG(L.eN))},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),R=(()=>{class r{constructor(e){this.http=e}getUserOrders(e){return this.http.post(D.Rn,e)}getStoreOrders(e){return this.http.post(D.j8,e)}addOrder(e){return this.http.post(D.Us,e)}}return r.\u0275fac=function(e){return new(e||r)(t.LFG(L.eN))},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var J=_(6588);let y=(()=>{class r{constructor(e){this.http=e}getUserSuppliers(e){return this.http.get(D.Dh,{params:{userId:e}})}getUserSuppliersPaged(e){return this.http.post(D.iy,e)}addSupplier(e){return this.http.post(D.zI,e)}}return r.\u0275fac=function(e){return new(e||r)(t.LFG(L.eN))},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var u=_(4859),d=_(9549),m=_(4144),P=_(8739),x=_(6308),w=_(1572),v=_(4850),Z=_(7392),N=_(3546);const G=["paginator"];function H(r,o){if(1&r&&(t.TgZ(0,"mat-card-header")(1,"mat-card-title"),t._uU(2),t.qZA(),t.TgZ(3,"mat-card-subtitle"),t._uU(4),t.qZA()()),2&r){const e=t.oxw();t.xp6(2),t.Oqu(e.store.name),t.xp6(2),t.Oqu(e.getStoreTypeString(e.store.type))}}function z(r,o){if(1&r&&(t.TgZ(0,"mat-card-subtitle"),t._uU(1),t.qZA()),2&r){const e=t.oxw();t.xp6(1),t.AsE("",e.constants.COUNT,"",e.orders.totalItemsCount,"")}}function X(r,o){if(1&r&&(t.TgZ(0,"mat-card-subtitle"),t._uU(1),t.qZA()),2&r){const e=t.oxw();t.xp6(1),t.AsE("",e.constants.COUNT,"",e.suppliers.totalItemsCount,"")}}function V(r,o){1&r&&(t.TgZ(0,"div",27),t._UZ(1,"mat-spinner",28),t.qZA())}function $(r,o){if(1&r){const e=t.EpF();t.TgZ(0,"mat-header-cell")(1,"div",29)(2,"div",30),t._uU(3),t.qZA(),t.TgZ(4,"mat-form-field")(5,"input",31),t.NdJ("keyup",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.onKeyUp())}),t.qZA()()()()}if(2&r){const e=t.oxw();t.xp6(2),t.Q6J("arrowPosition","before"),t.xp6(1),t.Oqu(e.constants.NAME),t.xp6(2),t.Q6J("formControl",e.searchField)("placeholder",e.constants.SEARCH_BY_NAME)}}function tt(r,o){if(1&r&&(t.TgZ(0,"mat-cell"),t._uU(1),t.qZA()),2&r){const e=o.$implicit;t.xp6(1),t.Oqu(e.name)}}function et(r,o){if(1&r&&(t.TgZ(0,"mat-header-cell")(1,"div")(2,"div"),t._uU(3),t.qZA()()()),2&r){const e=t.oxw();t.xp6(3),t.Oqu(e.constants.PRICE)}}function rt(r,o){if(1&r&&(t.TgZ(0,"mat-cell"),t._uU(1),t.qZA()),2&r){const e=o.$implicit;t.xp6(1),t.Oqu(e.price)}}function nt(r,o){if(1&r&&(t.TgZ(0,"mat-header-cell")(1,"div")(2,"div"),t._uU(3),t.qZA()()()),2&r){const e=t.oxw();t.xp6(3),t.Oqu(e.constants.QUANTITY)}}function ot(r,o){if(1&r&&(t.TgZ(0,"mat-cell"),t._uU(1),t.qZA()),2&r){const e=o.$implicit;t.xp6(1),t.Oqu(e.quantity)}}function at(r,o){if(1&r&&(t.TgZ(0,"mat-header-cell")(1,"div")(2,"div"),t._uU(3),t.qZA()()()),2&r){const e=t.oxw();t.xp6(3),t.Oqu(e.constants.MEASUREMENT_UNIT)}}function it(r,o){if(1&r&&(t.TgZ(0,"mat-cell"),t._uU(1),t.qZA()),2&r){const e=o.$implicit,n=t.oxw();t.xp6(1),t.Oqu(n.getUnitTypeString(e.measurementUnit))}}function st(r,o){1&r&&t._UZ(0,"mat-header-row")}function _t(r,o){1&r&&t._UZ(0,"mat-row")}function ct(r,o){if(1&r&&(t.TgZ(0,"div",32),t._uU(1),t.qZA()),2&r){const e=t.oxw();t.xp6(1),t.hij(" ",e.constants.NO_PRODUCTS_FOUND," ")}}const pt=function(){return[5,10,20]};let dt=(()=>{class r{constructor(e,n,s,l,M,I,Se){this.productsService=e,this.ordersService=n,this.storesService=s,this.suppliersService=l,this.route=M,this.router=I,this.location=Se,this.jwtHelper=new K.N0,this.decodedToken="",this.dataSource=new c.by,this.areProductsLoading=!0,this.searchField=new a.p4(""),this.constants=A,this.products={items:[],totalItemsCount:0},this.orders={items:[],totalItemsCount:0},this.suppliers={items:[],totalItemsCount:0},this.displayedColumns=["name","price","quantity","measurementUnit"],this.productsRequest={storeId:"",searchTerm:"",isDescending:!1,skip:0,take:5},this.initialProductsRequest={storeId:"",searchTerm:"",isDescending:!1,skip:0,take:5},this.ordersRequest={storeId:"",searchTerm:"",orderBy:"orderNumber",isDescending:!1,dateAddedFrom:null,dateAddedTo:null,skip:0,take:5},this.suppliersRequest={userId:"",searchTerm:"",orderBy:"name",isDescending:!1,dateAddedFrom:null,dateAddedTo:null,skip:0,take:5},this.subject=new C.x}ngOnInit(){this.decodedToken=this.jwtHelper.decodeToken(sessionStorage.getItem("access_token")),this.userId=sessionStorage.getItem("uid"),this.storeId=this.route.snapshot.params.storeId,this.decodedToken.role.includes("Admin")?(this.ordersRequest.storeId=this.storeId,this.suppliersRequest.userId=this.userId,this.subject.pipe((0,b.b)(800)).subscribe(e=>{this.searchByProductName(e)}),this.storesService.getStore(this.storeId).pipe((0,f.h)(e=>!!e),(0,h.P)()).subscribe(e=>this.store=e),this.ordersService.getStoreOrders(this.ordersRequest).pipe((0,f.h)(e=>!!e),(0,h.P)()).subscribe(e=>this.orders=e),this.suppliersService.getUserSuppliersPaged(this.suppliersRequest).pipe((0,f.h)(e=>!!e),(0,h.P)()).subscribe(e=>{this.suppliers=e}),this.initialProductsRequest.storeId=this.storeId,this.productsRequest={...this.initialProductsRequest},this.getProducts(this.productsRequest)):this.router.navigate(["/user",this.userId,"store",this.storeId,"sales"])}getStoreTypeString(e){return k.T[e]}getUnitTypeString(e){return S[e]}exportExcel(){this.storesService.exportReport(this.storeId).pipe((0,h.P)()).subscribe(e=>{var n="",s=e.headers.get("Content-Disposition");if(s&&-1!==s.indexOf("attachment")){var M=/filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/.exec(s);null!=M&&M[1]&&(n=M[1].replace(/['"]/g,""))}let I=document.createElement("a");I.href=window.URL.createObjectURL(e.body),I.download=n,document.body.append(I),I.click()})}onSortChange(e){this.productsRequest={...this.initialProductsRequest,storeId:this.storeId,isDescending:"desc"===e.direction},this.getProducts(this.productsRequest),this.paginator.firstPage()}pageChanged(){this.productsRequest={...this.productsRequest,skip:this.paginator.pageIndex*this.paginator.pageSize,take:this.paginator.pageSize},this.getProducts(this.productsRequest)}searchByProductName(e){this.paginator.firstPage(),this.productsRequest={...this.initialProductsRequest,searchTerm:e},this.getProducts(this.productsRequest)}goBack(){this.location.back()}navigateToOrdersPage(){this.router.navigate(["/user",this.userId,"store",this.storeId,"orders"])}navigateToSuppliersPage(){this.router.navigate(["/user",this.userId,"store",this.storeId,"suppliers"])}navigateToSalesPage(){this.router.navigate(["/user",this.userId,"store",this.storeId,"sales"])}onKeyUp(){this.subject.next(this.searchField.value)}getProducts(e){this.areProductsLoading=!0,this.productsService.getStoreProducts(this.productsRequest).pipe((0,f.h)(n=>!!n),(0,h.P)()).subscribe(n=>{this.products=n,this.dataSource.data=this.products.items,this.areProductsLoading=!1})}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(B),t.Y36(R),t.Y36(J._),t.Y36(y),t.Y36(T.gz),t.Y36(T.F0),t.Y36(i.Ye))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-store-page"]],viewQuery:function(e,n){if(1&e&&t.Gf(G,7),2&e){let s;t.iGM(s=t.CRH())&&(n.paginator=s.first)}},decls:77,vars:31,consts:[[1,"store-page-wrapper"],["mat-button","",1,"back-button",3,"click"],[1,"header-wrapper"],[1,"title"],[1,"card-wrapper"],[1,"card"],[4,"ngIf"],[1,"main-card-content"],[1,"content-card"],[1,"divider-wrapper"],["color","primary"],[3,"vertical"],[1,"content-card-title-wrapper"],["mat-button","",3,"click"],[2,"height","54%"],[1,"button-wrapper"],[1,"table-wrapper"],["class","spinner-wrapper",4,"ngIf"],["matSort","",1,"table",3,"matSortActive","matSortDirection","matSortDisableClear","dataSource","matSortChange"],[3,"matColumnDef"],[4,"matHeaderCellDef"],[4,"matCellDef"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["class","empty-state",4,"ngIf"],["showFirstLastButtons","",3,"length","pageSize","pageSizeOptions","page"],["paginator",""],[1,"spinner-wrapper"],["diameter","100","color","accent"],[1,"name-header-cell"],["mat-sort-header","",3,"arrowPosition"],["matInput","",3,"formControl","placeholder","keyup"],[1,"empty-state"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"a",1),t.NdJ("click",function(){return n.goBack()}),t.TgZ(2,"mat-icon"),t._uU(3,"chevron_left"),t.qZA(),t._uU(4),t.qZA(),t.TgZ(5,"div",2)(6,"h1",3),t._uU(7),t.qZA(),t._UZ(8,"mat-divider"),t.TgZ(9,"div",4)(10,"mat-card",5),t.YNc(11,H,5,2,"mat-card-header",6),t.TgZ(12,"mat-card-content",7)(13,"mat-card",8)(14,"mat-card-content")(15,"div",9)(16,"mat-icon",10),t._uU(17,"inventory"),t.qZA(),t._UZ(18,"mat-divider",11),t.qZA(),t.TgZ(19,"div",12)(20,"mat-card-title"),t._uU(21),t.qZA(),t.YNc(22,z,2,2,"mat-card-subtitle",6),t.qZA()(),t.TgZ(23,"mat-card-actions")(24,"a",13),t.NdJ("click",function(){return n.navigateToOrdersPage()}),t._uU(25),t.qZA()()(),t.TgZ(26,"mat-card",8)(27,"mat-card-content")(28,"div",9)(29,"mat-icon",10),t._uU(30,"local_shipping"),t.qZA(),t._UZ(31,"mat-divider",11),t.qZA(),t.TgZ(32,"div",12)(33,"mat-card-title"),t._uU(34),t.qZA(),t.YNc(35,X,2,2,"mat-card-subtitle",6),t.qZA()(),t.TgZ(36,"mat-card-actions")(37,"a",13),t.NdJ("click",function(){return n.navigateToSuppliersPage()}),t._uU(38),t.qZA()()(),t.TgZ(39,"mat-card",8)(40,"mat-card-content",14)(41,"div",9)(42,"mat-icon",10),t._uU(43,"sell"),t.qZA(),t._UZ(44,"mat-divider",11),t.qZA(),t.TgZ(45,"div",12)(46,"mat-card-title"),t._uU(47),t.qZA()()(),t.TgZ(48,"mat-card-actions")(49,"a",13),t.NdJ("click",function(){return n.navigateToSalesPage()}),t._uU(50),t.qZA()()()()(),t.TgZ(51,"div",15)(52,"a",13),t.NdJ("click",function(){return n.exportExcel()}),t.TgZ(53,"mat-icon"),t._uU(54,"table"),t.qZA(),t._uU(55),t.qZA()()()(),t._UZ(56,"mat-divider"),t.TgZ(57,"div",16),t.YNc(58,V,2,0,"div",17),t.TgZ(59,"mat-table",18),t.NdJ("matSortChange",function(l){return n.onSortChange(l)}),t.ynx(60,19),t.YNc(61,$,6,4,"mat-header-cell",20),t.YNc(62,tt,2,1,"mat-cell",21),t.BQk(),t.ynx(63,19),t.YNc(64,et,4,1,"mat-header-cell",20),t.YNc(65,rt,2,1,"mat-cell",21),t.BQk(),t.ynx(66,19),t.YNc(67,nt,4,1,"mat-header-cell",20),t.YNc(68,ot,2,1,"mat-cell",21),t.BQk(),t.ynx(69,19),t.YNc(70,at,4,1,"mat-header-cell",20),t.YNc(71,it,2,1,"mat-cell",21),t.BQk(),t.YNc(72,st,1,0,"mat-header-row",22),t.YNc(73,_t,1,0,"mat-row",23),t.qZA(),t.YNc(74,ct,2,1,"div",24),t.TgZ(75,"mat-paginator",25,26),t.NdJ("page",function(){return n.pageChanged()}),t.qZA()()()),2&e&&(t.xp6(4),t.hij("",n.constants.GO_BACK," "),t.xp6(3),t.Oqu(n.constants.STORE_DATA),t.xp6(4),t.Q6J("ngIf",n.store),t.xp6(7),t.Q6J("vertical",!0),t.xp6(3),t.Oqu(n.constants.ORDERS),t.xp6(1),t.Q6J("ngIf",n.orders),t.xp6(3),t.Oqu(n.constants.ORDERS),t.xp6(6),t.Q6J("vertical",!0),t.xp6(3),t.Oqu(n.constants.SUPPLIERS),t.xp6(1),t.Q6J("ngIf",n.suppliers),t.xp6(3),t.Oqu(n.constants.SUPPLIERS),t.xp6(6),t.Q6J("vertical",!0),t.xp6(3),t.Oqu(n.constants.SALES),t.xp6(3),t.Oqu(n.constants.SALES),t.xp6(5),t.hij(" ",n.constants.EXPORT_EXCEL," "),t.xp6(3),t.Q6J("ngIf",n.areProductsLoading),t.xp6(1),t.Q6J("matSortActive","name")("matSortDirection","asc")("matSortDisableClear",!0)("dataSource",n.dataSource),t.xp6(1),t.Q6J("matColumnDef","name"),t.xp6(3),t.Q6J("matColumnDef","price"),t.xp6(3),t.Q6J("matColumnDef","quantity"),t.xp6(3),t.Q6J("matColumnDef","measurementUnit"),t.xp6(3),t.Q6J("matHeaderRowDef",n.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",n.displayedColumns),t.xp6(1),t.Q6J("ngIf",!n.products||0===n.products.items.length),t.xp6(1),t.Q6J("length",n.products?n.products.totalItemsCount:0)("pageSize",5)("pageSizeOptions",t.DdM(30,pt)))},dependencies:[i.O5,u.zs,d.KE,m.Nt,c.BZ,c.fO,c.as,c.w1,c.Dz,c.nj,c.ge,c.ev,c.XQ,c.Gk,P.NW,x.YE,x.nU,w.Ou,v.d,Z.Hw,N.a8,N.dk,N.dn,N.n5,N.$j,N.hq,a.Fj,a.JJ,a.oH],styles:[".store-page-wrapper[_ngcontent-%COMP%]{margin:20px auto auto;width:50%}.store-page-wrapper[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:80px;border-radius:30px}.spinner-wrapper[_ngcontent-%COMP%]{position:absolute;height:38%;width:50%;background-color:#0000004d;display:flex;justify-content:center;align-items:center}.spinner-wrapper[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%]{position:sticky}.header-wrapper[_ngcontent-%COMP%]{margin-bottom:20px}mat-divider[_ngcontent-%COMP%]{margin-bottom:20px}.main-card-content[_ngcontent-%COMP%]{display:flex;justify-content:space-around}.card-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.card-wrapper[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{width:51%;margin-left:10px}.card-wrapper[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .content-card[_ngcontent-%COMP%]{width:30%;margin-right:10px}.card-wrapper[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .content-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.card-wrapper[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .content-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .divider-wrapper[_ngcontent-%COMP%]{display:flex}.card-wrapper[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .content-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .divider-wrapper[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:10px}.button-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:end;height:-moz-fit-content;height:fit-content;margin-top:20%}.button-wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin-right:10px}.empty-state[_ngcontent-%COMP%]{height:60px;background-color:#0000000d;text-align:center;line-height:60px}.name-header-cell[_ngcontent-%COMP%]{display:flex}.name-header-cell[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{text-align:center;line-height:60px;vertical-align:middle;margin-right:10px}.name-header-cell[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{margin-right:10px;width:150px}.table-wrapper[_ngcontent-%COMP%]{overflow:auto;width:100%}mat-paginator[_ngcontent-%COMP%]{margin-bottom:100px}"]}),r})();var U=_(8242),F=_(4385),W=_(3238),Q=_(6338),Y=_(6257);function lt(r,o){if(1&r&&t._uU(0),2&r){const e=t.oxw();t.Oqu(e.constants.CHOOSE_SUPPLIER)}}function ut(r,o){if(1&r){const e=t.EpF();t.TgZ(0,"div")(1,"div",36)(2,"mat-icon"),t._uU(3,"info"),t.qZA(),t.TgZ(4,"div"),t._uU(5),t.qZA()(),t.TgZ(6,"button",34),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.navigateToStoreSuppliers())}),t.TgZ(7,"mat-icon"),t._uU(8,"local_shipping"),t.qZA(),t._uU(9),t.qZA()()}if(2&r){const e=t.oxw();t.xp6(5),t.Oqu(e.constants.IF_NO_SUPPLIER),t.xp6(4),t.hij(" ",e.constants.SUPPLIERS," ")}}function mt(r,o){if(1&r&&(t.TgZ(0,"mat-option",38),t._uU(1),t.qZA()),2&r){const e=o.$implicit;t.Q6J("value",e),t.xp6(1),t.Oqu(e.name)}}function gt(r,o){if(1&r&&(t.TgZ(0,"div")(1,"mat-form-field")(2,"mat-label"),t._uU(3),t.qZA(),t.TgZ(4,"mat-select",37),t.YNc(5,mt,2,2,"mat-option",27),t.qZA()()()),2&r){const e=t.oxw();t.xp6(3),t.Oqu(e.constants.SUPPLIER),t.xp6(1),t.Q6J("formControl",e.supplierForm),t.xp6(1),t.Q6J("ngForOf",e.suppliers)}}function ht(r,o){if(1&r&&t._uU(0),2&r){const e=t.oxw();t.Oqu(e.constants.ADD_ORDER)}}function ft(r,o){if(1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&r){const e=t.oxw();t.xp6(1),t.hij(" ",e.constants.FIELD_REQUIRED," ")}}function Ot(r,o){if(1&r&&(t.TgZ(0,"mat-list-item",39)(1,"p"),t._uU(2),t.qZA()()),2&r){const e=o.$implicit,n=t.oxw();t.xp6(2),t.HOy("",e.name," (",e.quantity," + ",e.plusQuantity?e.plusQuantity:0,") ",n.getUnitTypeString(e.measurementUnit),"")}}function Pt(r,o){if(1&r&&(t.TgZ(0,"mat-option",38),t._uU(1),t.qZA()),2&r){const e=o.$implicit;t.Q6J("value",e),t.xp6(1),t.Oqu(e.name)}}function Ct(r,o){if(1&r){const e=t.EpF();t.TgZ(0,"div",40)(1,"h1"),t._uU(2),t.qZA(),t._UZ(3,"mat-divider",0),t.TgZ(4,"div",20)(5,"div",11)(6,"mat-form-field",12)(7,"mat-label"),t._uU(8),t.qZA(),t.TgZ(9,"mat-select",41),t.YNc(10,Pt,2,2,"mat-option",27),t.qZA()()(),t.TgZ(11,"mat-icon",24),t._uU(12,"category"),t.qZA(),t.TgZ(13,"div",11)(14,"mat-form-field",12)(15,"mat-label"),t._uU(16),t.qZA(),t._UZ(17,"input",42),t.qZA()()(),t.TgZ(18,"button",43),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.addProductToList())}),t.TgZ(19,"mat-icon"),t._uU(20,"add"),t.qZA(),t._uU(21),t.qZA()()}if(2&r){const e=t.oxw();t.xp6(2),t.Oqu(e.constants.ADD_EXISTING_PRODUCT),t.xp6(6),t.Oqu(e.constants.ADD_EXISTING_PRODUCT),t.xp6(2),t.Q6J("ngForOf",e.products),t.xp6(6),t.Oqu(e.constants.ADD_QUANTITY),t.xp6(5),t.hij(" ",e.constants.ADD," ")}}function Tt(r,o){if(1&r&&(t.TgZ(0,"mat-hint"),t._uU(1),t.qZA()),2&r){const e=t.oxw();t.xp6(1),t.Oqu(e.constants.OR_ADD_NEW_ONE)}}function At(r,o){if(1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&r){const e=t.oxw();t.xp6(1),t.hij(" ",e.constants.PRODUCT_NAME_LENGTH," ")}}function Et(r,o){if(1&r&&(t.TgZ(0,"mat-option",38),t._uU(1),t.qZA()),2&r){const e=o.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e.name," ")}}function xt(r,o){if(1&r&&t._uU(0),2&r){const e=t.oxw();t.Oqu(e.constants.DONE)}}let Mt=(()=>{class r{constructor(e,n,s,l,M,I){this.router=e,this.ordersService=n,this.suppliersService=s,this.productsService=l,this.bottomSheetRef=M,this.data=I,this.constants=A,this.orderProducts=[],this.products=[],this.suppliers=[],this.productMeasurementUnitConfiguration=[{name:"SingularPiece",value:0},{name:"Kilogram",value:1},{name:"Litre",value:2},{name:"Metre",value:3}],this.supplierForm=new a.p4("",a.kI.required),this.orderForm=new a.nJ({orderNumber:new a.p4("",a.kI.required),existingProduct:new a.p4(""),addQuantity:new a.p4(""),newProductName:new a.p4("",[a.kI.maxLength(A.PRODUCT_NAME_MAX_LENGTH),a.kI.required]),newProductPrice:new a.p4("",a.kI.required),newProductQuantity:new a.p4("",a.kI.required),newProductMeasurementUnit:new a.p4(this.productMeasurementUnitConfiguration[0],a.kI.required)})}ngOnInit(){this.suppliersService.getUserSuppliers(this.data.userId).pipe((0,f.h)(e=>!!e),(0,h.P)()).subscribe(e=>this.suppliers=e),this.productsService.getStoreAddProducts(this.data.storeId).pipe((0,f.h)(e=>!!e),(0,h.P)()).subscribe(e=>this.products=e)}addProductToList(){const e=this.orderForm.controls.existingProduct.value,s=Number(this.orderForm.controls.addQuantity.value);e.plusQuantity=s,this.orderProducts.push(e),this.orderForm.controls.existingProduct.setValue("")}addNewProductToList(){this.orderProducts.push({id:null,name:this.orderForm.controls.newProductName.value,quantity:this.orderForm.controls.newProductQuantity.value,price:this.orderForm.controls.newProductPrice.value,measurementUnit:this.orderForm.controls.newProductMeasurementUnit.value.value,plusQuantity:null})}isNewProductFormValid(){return this.orderForm.controls.newProductName.valid&&this.orderForm.controls.newProductQuantity.valid&&this.orderForm.controls.newProductPrice.valid&&this.orderForm.controls.newProductMeasurementUnit.valid}addOrder(e){const n={orderNumber:this.orderForm.controls.orderNumber.value,storeId:this.data.storeId,products:this.orderProducts,supplierId:this.supplierForm.value.id};this.bottomSheetRef.dismiss(),e.preventDefault(),this.ordersService.addOrder(n).pipe((0,b.b)(500),(0,f.h)(l=>!!l),(0,h.P)()).subscribe();let s=this.router.url;this.router.navigateByUrl("/",{skipLocationChange:!0}).then(()=>{this.router.navigate([s])})}getUnitTypeString(e){let n="";switch(S[e]){case"SingularPiece":n="pieces";break;case"Kilogram":n="kg";break;case"Litre":n="l";break;case"Metre":n="m"}return n}navigateToStoreSuppliers(){this.bottomSheetRef.dismiss(),this.router.navigate(["/user",this.data.userId,"store",this.data.storeId,"suppliers"])}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(T.F0),t.Y36(R),t.Y36(y),t.Y36(B),t.Y36(U.oL),t.Y36(U.OG))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-add-order"]],decls:82,vars:28,consts:[[2,"margin-bottom","10px"],[1,"add-order-wrapper"],["orientation","vertical",3,"linear"],["stepper",""],[3,"stepControl"],["matStepLabel",""],[4,"ngIf"],[2,"margin-bottom","10px","margin-top","30px"],[2,"display","flex","justify-content","end"],["color","primary","mat-button","","matStepperNext","",3,"disabled"],[3,"formGroup"],[1,"field"],["appearance","outline"],["matInput","","formControlName","orderNumber"],["color","primary",1,"fields-icon"],[1,"products-wrapper"],["role","list",1,"products-list"],["role","listitem",4,"ngFor","ngForOf"],["class","existing-product",4,"ngIf"],[1,"new-product"],[1,"fields"],["matInput","","formControlName","newProductName"],["matInput","","formControlName","newProductQuantity","type","number"],[2,"display","flex","justify-content","center"],["color","primary"],["matInput","","formControlName","newProductPrice","type","number"],["formControlName","newProductMeasurementUnit"],[3,"value",4,"ngFor","ngForOf"],["color","primary","mat-button","",3,"disabled","click"],[2,"margin-top","15px","margin-bottom","20px"],[2,"justify-content","end","display","flex"],["color","primary","mat-button","","matStepperPrevious",""],["color","primary","mat-button","","matStepperNext",""],[2,"display","flex","justify-content","space-between"],["mat-button","","color","primary",3,"click"],["mat-button","","matStepperPrevious","","color","primary"],[1,"info-wrapper"],[3,"formControl"],[3,"value"],["role","listitem"],[1,"existing-product"],["formControlName","existingProduct"],["matInput","","type","number","formControlName","addQuantity"],["color","primary","mat-button","",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"h1"),t._uU(1),t.qZA(),t._UZ(2,"mat-divider",0),t.TgZ(3,"div",1)(4,"div")(5,"mat-vertical-stepper",2,3)(7,"mat-step",4),t.YNc(8,lt,1,1,"ng-template",5),t.YNc(9,ut,10,2,"div",6),t.YNc(10,gt,6,3,"div",6),t._UZ(11,"mat-divider",7),t.TgZ(12,"div",8)(13,"button",9),t._uU(14),t.qZA()()(),t.TgZ(15,"mat-step",4),t.YNc(16,ht,1,1,"ng-template",5),t.TgZ(17,"form",10)(18,"div",11)(19,"mat-form-field",12)(20,"mat-label"),t._uU(21),t.qZA(),t._UZ(22,"input",13),t.YNc(23,ft,2,1,"mat-error",6),t.qZA(),t.TgZ(24,"mat-icon",14),t._uU(25,"123"),t.qZA()(),t._UZ(26,"mat-divider"),t.TgZ(27,"div",15)(28,"mat-list",16),t.YNc(29,Ot,3,4,"mat-list-item",17),t.qZA(),t.YNc(30,Ct,22,5,"div",18),t.YNc(31,Tt,2,1,"mat-hint",6),t.TgZ(32,"div",19)(33,"h1"),t._uU(34),t.qZA(),t._UZ(35,"mat-divider",0),t.TgZ(36,"div",20)(37,"div",11)(38,"mat-form-field",12)(39,"mat-label"),t._uU(40),t.qZA(),t._UZ(41,"input",21),t.YNc(42,At,2,1,"mat-error",6),t.qZA()(),t.TgZ(43,"div",11)(44,"mat-form-field",12)(45,"mat-label"),t._uU(46),t.qZA(),t._UZ(47,"input",22),t.qZA()()(),t.TgZ(48,"div",23)(49,"mat-icon",24),t._uU(50,"category"),t.qZA()(),t.TgZ(51,"div",20)(52,"div",11)(53,"mat-form-field",12)(54,"mat-label"),t._uU(55),t.qZA(),t._UZ(56,"input",25),t.qZA()(),t.TgZ(57,"div",11)(58,"mat-form-field",12)(59,"mat-label"),t._uU(60),t.qZA(),t.TgZ(61,"mat-select",26),t.YNc(62,Et,2,2,"mat-option",27),t.qZA()()()(),t.TgZ(63,"button",28),t.NdJ("click",function(){return n.addNewProductToList()}),t.TgZ(64,"mat-icon"),t._uU(65,"add"),t.qZA(),t._uU(66),t.qZA()()()(),t._UZ(67,"mat-divider",29),t.TgZ(68,"div",30)(69,"button",31),t._uU(70),t.qZA(),t.TgZ(71,"button",32),t._uU(72),t.qZA()()(),t.TgZ(73,"mat-step"),t.YNc(74,xt,1,1,"ng-template",5),t.TgZ(75,"p"),t._uU(76),t.qZA(),t.TgZ(77,"div",33)(78,"button",34),t.NdJ("click",function(l){return n.addOrder(l)}),t._uU(79),t.qZA(),t.TgZ(80,"button",35),t._uU(81),t.qZA()()()()()()),2&e&&(t.xp6(1),t.Oqu(n.constants.ADD_ORDER),t.xp6(4),t.Q6J("linear",!0),t.xp6(2),t.Q6J("stepControl",n.supplierForm),t.xp6(2),t.Q6J("ngIf",0===n.suppliers.length),t.xp6(1),t.Q6J("ngIf",n.suppliers.length>0),t.xp6(3),t.Q6J("disabled",n.supplierForm.invalid),t.xp6(1),t.Oqu(n.constants.NEXT),t.xp6(1),t.Q6J("stepControl",n.orderForm),t.xp6(2),t.Q6J("formGroup",n.orderForm),t.xp6(4),t.Oqu(n.constants.ORDER_NUMBER),t.xp6(2),t.Q6J("ngIf",n.orderForm.controls.orderNumber.hasError("required")),t.xp6(6),t.Q6J("ngForOf",n.orderProducts),t.xp6(1),t.Q6J("ngIf",n.products.length>0),t.xp6(1),t.Q6J("ngIf",n.products.length>0),t.xp6(3),t.Oqu(n.constants.ADD_NEW_PRODUCT),t.xp6(6),t.Oqu(n.constants.PRODUCT_NAME),t.xp6(2),t.Q6J("ngIf",n.orderForm.controls.newProductName.hasError("maxLength")),t.xp6(4),t.Oqu(n.constants.QUANTITY),t.xp6(9),t.Oqu(n.constants.PRICE),t.xp6(5),t.Oqu(n.constants.MEASUREMENT_UNIT),t.xp6(2),t.Q6J("ngForOf",n.productMeasurementUnitConfiguration),t.xp6(1),t.Q6J("disabled",!n.isNewProductFormValid()),t.xp6(3),t.hij(" ",n.constants.ADD_NEW_PRODUCT," "),t.xp6(4),t.Oqu(n.constants.BACK),t.xp6(2),t.Oqu(n.constants.NEXT),t.xp6(4),t.Oqu(n.constants.CLICK_BELOW_TO_ADD_ORDER),t.xp6(3),t.Oqu(n.constants.ADD_ORDER),t.xp6(2),t.Oqu(n.constants.BACK))},dependencies:[i.sg,i.O5,u.lW,d.TO,d.KE,d.bx,d.hX,m.Nt,v.d,Z.Hw,F.gD,W.ey,a._Y,a.Fj,a.wV,a.JJ,a.JL,a.oH,a.sg,a.u,Q.i$,Q.Tg,Y.C0,Y.VY,Y.Vq,Y.Ic,Y.fd],styles:[".add-order-wrapper[_ngcontent-%COMP%]{margin:auto}.products-list[_ngcontent-%COMP%]{max-height:300px;overflow:scroll}.info-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;vertical-align:middle;background-color:#0000004d;border-radius:10px;height:-moz-fit-content;height:fit-content;padding:5px;margin-top:10px;margin-bottom:10px}.info-wrapper[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin:auto}.info-wrapper[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{margin:auto}.fields[_ngcontent-%COMP%]{display:flex}.fields[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]{margin:0 5px}.fields[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-top:15px}.existing-product[_ngcontent-%COMP%]{border:solid 2px rgba(0,0,0,.3);border-radius:10px;box-shadow:3px 3px 1px 3px #888;margin-bottom:15px;padding:20px}.new-product[_ngcontent-%COMP%]{margin-top:15px;border:solid 2px rgba(0,0,0,.3);border-radius:10px;box-shadow:3px 3px 1px 3px #888;padding:20px}"]}),r})();var E=_(9602);const Dt=["paginator"];function vt(r,o){if(1&r&&(t.TgZ(0,"h1",17),t._uU(1),t.qZA()),2&r){const e=t.oxw();t.xp6(1),t.AsE("",e.store.name,"",e.constants.ORDERS,"")}}function Zt(r,o){1&r&&(t.TgZ(0,"div",18),t._UZ(1,"mat-spinner",19),t.qZA())}function Ut(r,o){if(1&r){const e=t.EpF();t.TgZ(0,"mat-header-cell")(1,"div",20)(2,"mat-form-field")(3,"input",21),t.NdJ("keyup",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.onKeyUp())}),t.qZA()(),t.TgZ(4,"div",22),t._uU(5),t.qZA()()()}if(2&r){const e=t.oxw();t.xp6(3),t.Q6J("formControl",e.searchFormControl)("placeholder",e.constants.SEARCH),t.xp6(1),t.Q6J("arrowPosition","before"),t.xp6(1),t.Oqu(e.constants.ORDER_NUMBER)}}function bt(r,o){if(1&r&&(t.TgZ(0,"mat-cell"),t._uU(1),t.qZA()),2&r){const e=o.$implicit;t.xp6(1),t.Oqu(e.orderNumber)}}function St(r,o){if(1&r&&(t.TgZ(0,"mat-header-cell")(1,"div")(2,"div",22),t._uU(3),t.qZA()()()),2&r){const e=t.oxw();t.xp6(2),t.Q6J("arrowPosition","before"),t.xp6(1),t.Oqu(e.constants.SUPPLIER_NAME)}}function wt(r,o){if(1&r&&(t.TgZ(0,"mat-cell"),t._uU(1),t.qZA()),2&r){const e=o.$implicit;t.xp6(1),t.Oqu(e.supplierName)}}function It(r,o){if(1&r){const e=t.EpF();t.TgZ(0,"mat-header-cell",23)(1,"div")(2,"div",22),t._uU(3),t.qZA()(),t.TgZ(4,"form",24)(5,"mat-form-field",25)(6,"mat-label"),t._uU(7),t.qZA(),t.TgZ(8,"mat-date-range-input",26),t._UZ(9,"input",27)(10,"input",28),t.qZA(),t.TgZ(11,"mat-hint"),t._uU(12,"MM/DD/YYYY \u2013 MM/DD/YYYY"),t.qZA(),t._UZ(13,"mat-datepicker-toggle",29)(14,"mat-date-range-picker",null,30),t.qZA(),t.TgZ(16,"button",31)(17,"mat-icon",32),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.filterByDate())}),t._uU(18,"search"),t.qZA()()()()}if(2&r){const e=t.MAs(15),n=t.oxw();t.xp6(2),t.Q6J("arrowPosition","before"),t.xp6(1),t.Oqu(n.constants.DATE_ADDED),t.xp6(1),t.Q6J("formGroup",n.dateRangeFormControl),t.xp6(3),t.Oqu(n.constants.PICK_DATE_RANGE),t.xp6(1),t.Q6J("rangePicker",e),t.xp6(5),t.Q6J("for",e)}}function qt(r,o){if(1&r&&(t.TgZ(0,"mat-cell"),t._uU(1),t.ALo(2,"date"),t.qZA()),2&r){const e=o.$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,e.createdOn))}}function Rt(r,o){1&r&&t._UZ(0,"mat-header-row")}function yt(r,o){1&r&&t._UZ(0,"mat-row")}function Nt(r,o){if(1&r&&(t.TgZ(0,"div",33),t._uU(1),t.qZA()),2&r){const e=t.oxw();t.xp6(1),t.hij(" ",e.constants.NO_ORDERS_FOUND," ")}}const kt=function(){return[5,10,20]};let Lt=(()=>{class r{constructor(e,n,s,l,M){this.location=e,this.route=n,this.storesService=s,this.ordersService=l,this.addOrderBottomSheet=M,this.dataSource=new c.by,this.areOrdersLoading=!0,this.searchFormControl=new a.p4(""),this.dateRangeFormControl=new a.nJ({start:new a.p4(""),end:new a.p4("")}),this.constants=A,this.storeId="",this.userId="",this.orders={items:[],totalItemsCount:0},this.ordersRequest={storeId:"",searchTerm:"",orderBy:"orderNumber",isDescending:!1,dateAddedFrom:null,dateAddedTo:null,skip:0,take:5},this.initialOrdersRequest={storeId:"",searchTerm:"",orderBy:"orderNumber",isDescending:!1,dateAddedFrom:null,dateAddedTo:null,skip:0,take:5},this.displayedColumns=["orderNumber","supplierName","createdOn"],this.subs=[],this.subject=new C.x}ngOnInit(){this.subject.pipe((0,b.b)(800)).subscribe(e=>{this.search(e)}),this.storeId=this.route.snapshot.params.storeId,this.userId=this.route.snapshot.params.userId,this.initialOrdersRequest.storeId=this.storeId,this.ordersRequest={...this.initialOrdersRequest},this.storesService.getStore(this.storeId).pipe((0,f.h)(e=>!!e),(0,h.P)()).subscribe(e=>this.store=e),this.subs.push(this.ordersService.getStoreOrders(this.initialOrdersRequest).pipe((0,f.h)(e=>!!e),(0,h.P)()).subscribe(e=>{this.areOrdersLoading=!1,this.orders=e,this.dataSource.data=this.orders.items}))}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}goBack(){this.location.back()}onSortChange(e){this.ordersRequest={...this.initialOrdersRequest,isDescending:"desc"===e.direction},this.getStoreOrders(this.ordersRequest),this.paginator.firstPage()}pageChanged(){this.ordersRequest={...this.ordersRequest,skip:this.paginator.pageIndex*this.paginator.pageSize,take:this.paginator.pageSize},this.getStoreOrders(this.ordersRequest)}search(e){this.ordersRequest={...this.initialOrdersRequest,searchTerm:e},this.getStoreOrders(this.ordersRequest),this.paginator.firstPage()}filterByDate(){this.ordersRequest={...this.initialOrdersRequest,dateAddedFrom:this.dateRangeFormControl.controls.start.value,dateAddedTo:this.dateRangeFormControl.controls.end.value},this.getStoreOrders(this.ordersRequest),this.paginator.firstPage()}onKeyUp(){this.subject.next(this.searchFormControl.value)}onAddOrder(){this.addOrderBottomSheet.open(Mt,{data:{storeId:this.storeId,userId:this.userId}})}getStoreOrders(e){this.areOrdersLoading=!0,this.ordersService.getStoreOrders(e).pipe((0,f.h)(n=>!!n),(0,h.P)()).subscribe(n=>{this.areOrdersLoading=!1,this.orders=n,this.dataSource.data=n.items})}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(i.Ye),t.Y36(T.gz),t.Y36(J._),t.Y36(R),t.Y36(U.ch))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-orders-page"]],viewQuery:function(e,n){if(1&e&&t.Gf(Dt,7),2&e){let s;t.iGM(s=t.CRH())&&(n.paginator=s.first)}},decls:29,vars:18,consts:[[1,"orders-page-wrapper"],["mat-button","",1,"back-button",3,"click"],[1,"header-wrapper"],["class","title",4,"ngIf"],["mat-button","",3,"click"],[1,"table-wrapper"],["class","spinner-wrapper",4,"ngIf"],["matSort","",1,"table",3,"matSortActive","matSortDirection","matSortDisableClear","dataSource","matSortChange"],[3,"matColumnDef"],[4,"matHeaderCellDef"],[4,"matCellDef"],["class","date-header",4,"matHeaderCellDef"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["class","empty-state",4,"ngIf"],["showFirstLastButtons","",3,"length","pageSize","pageSizeOptions","page"],["paginator",""],[1,"title"],[1,"spinner-wrapper"],["diameter","100","color","accent"],[1,"orderNumber-header-cell"],["matInput","",3,"formControl","placeholder","keyup"],["mat-sort-header","",3,"arrowPosition"],[1,"date-header"],[3,"formGroup"],["appearance","fill",2,"width","170px"],[3,"rangePicker"],["matStartDate","","formControlName","start","placeholder","Date Added From"],["matEndDate","","formControlName","end","placeholder","Date Added To"],["matSuffix","",3,"for"],["dateRangePicker",""],["mat-mini-fab","",1,"button-filter-date"],["color","primary",1,"search-icon",3,"click"],[1,"empty-state"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"a",1),t.NdJ("click",function(){return n.goBack()}),t.TgZ(2,"mat-icon"),t._uU(3,"chevron_left"),t.qZA(),t._uU(4),t.qZA(),t.TgZ(5,"div",2),t.YNc(6,vt,2,2,"h1",3),t.TgZ(7,"a",4),t.NdJ("click",function(){return n.onAddOrder()}),t.TgZ(8,"mat-icon"),t._uU(9,"add"),t.qZA(),t._uU(10),t.qZA()(),t._UZ(11,"mat-divider"),t.TgZ(12,"div",5),t.YNc(13,Zt,2,0,"div",6),t.TgZ(14,"mat-table",7),t.NdJ("matSortChange",function(l){return n.onSortChange(l)}),t.ynx(15,8),t.YNc(16,Ut,6,4,"mat-header-cell",9),t.YNc(17,bt,2,1,"mat-cell",10),t.BQk(),t.ynx(18,8),t.YNc(19,St,4,2,"mat-header-cell",9),t.YNc(20,wt,2,1,"mat-cell",10),t.BQk(),t.ynx(21,8),t.YNc(22,It,19,6,"mat-header-cell",11),t.YNc(23,qt,3,3,"mat-cell",10),t.BQk(),t.YNc(24,Rt,1,0,"mat-header-row",12),t.YNc(25,yt,1,0,"mat-row",13),t.qZA(),t.YNc(26,Nt,2,1,"div",14),t.TgZ(27,"mat-paginator",15,16),t.NdJ("page",function(){return n.pageChanged()}),t.qZA()()()),2&e&&(t.xp6(4),t.hij("",n.constants.GO_BACK," "),t.xp6(2),t.Q6J("ngIf",n.store),t.xp6(4),t.hij(" ",n.constants.ADD_ORDER," "),t.xp6(3),t.Q6J("ngIf",n.areOrdersLoading),t.xp6(1),t.Q6J("matSortActive","orderNumber")("matSortDirection","asc")("matSortDisableClear",!0)("dataSource",n.dataSource),t.xp6(1),t.Q6J("matColumnDef","orderNumber"),t.xp6(3),t.Q6J("matColumnDef","supplierName"),t.xp6(3),t.Q6J("matColumnDef","createdOn"),t.xp6(3),t.Q6J("matHeaderRowDef",n.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",n.displayedColumns),t.xp6(1),t.Q6J("ngIf",!n.orders||0===n.orders.items.length),t.xp6(1),t.Q6J("length",n.orders?n.orders.totalItemsCount:0)("pageSize",5)("pageSizeOptions",t.DdM(17,kt)))},dependencies:[i.O5,u.lW,u.zs,d.KE,d.bx,d.hX,d.R9,m.Nt,c.BZ,c.fO,c.as,c.w1,c.Dz,c.nj,c.ge,c.ev,c.XQ,c.Gk,P.NW,x.YE,x.nU,w.Ou,v.d,Z.Hw,a._Y,a.Fj,a.JJ,a.JL,a.oH,a.sg,a.u,E.nW,E.wx,E.zY,E.By,E._g,i.uU],styles:[".orders-page-wrapper[_ngcontent-%COMP%]{margin:20px auto auto;width:50%}.orders-page-wrapper[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]{margin-top:50px;margin-bottom:80px;border-radius:30px}.spinner-wrapper[_ngcontent-%COMP%]{position:absolute;height:38%;width:50%;background-color:#0000004d;display:flex;justify-content:center;align-items:center}.spinner-wrapper[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%]{position:sticky}.header-wrapper[_ngcontent-%COMP%]{margin-bottom:20px;display:flex;justify-content:space-between}.header-wrapper[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{margin:0}mat-divider[_ngcontent-%COMP%]{margin-bottom:20px}.empty-state[_ngcontent-%COMP%]{height:60px;background-color:#0000000d;text-align:center;line-height:60px}.orderNumber-header-cell[_ngcontent-%COMP%]{display:flex}.orderNumber-header-cell[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{text-align:center;line-height:60px;vertical-align:middle;margin-right:10px}.orderNumber-header-cell[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{margin-right:10px;width:150px}.date-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:start}.date-header[_ngcontent-%COMP%]   .search-icon[_ngcontent-%COMP%]{margin-left:10px}.date-header[_ngcontent-%COMP%]   .search-icon[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover{cursor:pointer}.button-filter-date[_ngcontent-%COMP%]{background-color:#0000;box-shadow:none!important}"]}),r})();function Bt(r,o){if(1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&r){const e=t.oxw();t.xp6(1),t.hij(" ",e.constants.FIELD_REQUIRED," ")}}function Jt(r,o){if(1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&r){const e=t.oxw();t.xp6(1),t.hij(" ",e.constants.SUPPLIER_NAME_MAX_LENGTH_ERROR," ")}}let Yt=(()=>{class r{constructor(e,n,s,l){this.router=e,this.bottomSheetRef=n,this.suppliersService=s,this.data=l,this.constants=A,this.form=new a.p4("",[a.kI.required,a.kI.maxLength(A.SUPPLIER_NAME_MAX_LENGTH)])}ngOnInit(){}onAddSupplier(e){const n={name:this.form.value,userId:this.data.userId};this.bottomSheetRef.dismiss(),e.preventDefault(),this.suppliersService.addSupplier(n).pipe((0,b.b)(500),(0,f.h)(l=>!!l),(0,h.P)()).subscribe();let s=this.router.url;this.router.navigateByUrl("/",{skipLocationChange:!0}).then(()=>{this.router.navigate([s])})}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(T.F0),t.Y36(U.oL),t.Y36(y),t.Y36(U.OG))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-add-supplier"]],decls:17,vars:7,consts:[[1,"form-wrapper"],[2,"margin-bottom","10px"],[1,"field"],["appearance","outline"],["matInput","",3,"formControl"],[4,"ngIf"],["color","primary",1,"fields-icon"],[1,"button-wrapper"],["mat-raised-button","","color","primary",3,"disabled","click"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"h1"),t._uU(2),t.qZA(),t._UZ(3,"mat-divider",1),t.TgZ(4,"div",2)(5,"mat-form-field",3)(6,"mat-label"),t._uU(7),t.qZA(),t._UZ(8,"input",4),t.YNc(9,Bt,2,1,"mat-error",5),t.YNc(10,Jt,2,1,"mat-error",5),t.qZA(),t.TgZ(11,"mat-icon",6),t._uU(12,"badge"),t.qZA()(),t._UZ(13,"mat-divider"),t.TgZ(14,"div",7)(15,"button",8),t.NdJ("click",function(l){return n.onAddSupplier(l)}),t._uU(16),t.qZA()()()),2&e&&(t.xp6(2),t.Oqu(n.constants.ADD_SUPPLIER),t.xp6(5),t.Oqu(n.constants.NAME),t.xp6(1),t.Q6J("formControl",n.form),t.xp6(1),t.Q6J("ngIf",n.form.hasError("required")),t.xp6(1),t.Q6J("ngIf",n.form.hasError("maxLength")),t.xp6(5),t.Q6J("disabled",!n.form.valid),t.xp6(1),t.Oqu(n.constants.ADD_SUPPLIER))},dependencies:[i.O5,u.lW,d.TO,d.KE,d.hX,m.Nt,v.d,Z.Hw,a.Fj,a.JJ,a.oH],styles:[".field[_ngcontent-%COMP%]{margin-left:10px}mat-divider[_ngcontent-%COMP%]{margin-bottom:10px}.button-wrapper[_ngcontent-%COMP%]{margin-left:10px}.fields-icon[_ngcontent-%COMP%]{margin-left:24px}"]}),r})();const Qt=["paginator"];function Kt(r,o){if(1&r&&(t.TgZ(0,"h1",17),t._uU(1),t.qZA()),2&r){const e=t.oxw();t.xp6(1),t.AsE("",e.store.name,"",e.constants.SUPPLIERS,"")}}function Ft(r,o){1&r&&(t.TgZ(0,"div",18),t._UZ(1,"mat-spinner",19),t.qZA())}function Wt(r,o){if(1&r){const e=t.EpF();t.TgZ(0,"mat-header-cell")(1,"div",20)(2,"mat-form-field")(3,"input",21),t.NdJ("keyup",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.onKeyUp())}),t.qZA()(),t.TgZ(4,"div",22),t._uU(5),t.qZA()()()}if(2&r){const e=t.oxw();t.xp6(3),t.Q6J("formControl",e.searchFormControl)("placeholder",e.constants.SEARCH),t.xp6(1),t.Q6J("arrowPosition","before"),t.xp6(1),t.Oqu(e.constants.NAME)}}function jt(r,o){if(1&r&&(t.TgZ(0,"mat-cell"),t._uU(1),t.qZA()),2&r){const e=o.$implicit;t.xp6(1),t.Oqu(e.name)}}function Gt(r,o){if(1&r){const e=t.EpF();t.TgZ(0,"mat-header-cell",23)(1,"div")(2,"div",22),t._uU(3),t.qZA()(),t.TgZ(4,"form",24)(5,"mat-form-field",25)(6,"mat-label"),t._uU(7),t.qZA(),t.TgZ(8,"mat-date-range-input",26),t._UZ(9,"input",27)(10,"input",28),t.qZA(),t.TgZ(11,"mat-hint"),t._uU(12,"MM/DD/YYYY \u2013 MM/DD/YYYY"),t.qZA(),t._UZ(13,"mat-datepicker-toggle",29)(14,"mat-date-range-picker",null,30),t.qZA(),t.TgZ(16,"button",31)(17,"mat-icon",32),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.filterByDate())}),t._uU(18,"search"),t.qZA()()()()}if(2&r){const e=t.MAs(15),n=t.oxw();t.xp6(2),t.Q6J("arrowPosition","before"),t.xp6(1),t.Oqu(n.constants.DATE_ADDED),t.xp6(1),t.Q6J("formGroup",n.dateRangeFormControl),t.xp6(3),t.Oqu(n.constants.PICK_DATE_RANGE),t.xp6(1),t.Q6J("rangePicker",e),t.xp6(5),t.Q6J("for",e)}}function Ht(r,o){if(1&r&&(t.TgZ(0,"mat-cell"),t._uU(1),t.ALo(2,"date"),t.qZA()),2&r){const e=o.$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,e.createdOn))}}function zt(r,o){1&r&&t._UZ(0,"mat-header-row")}function Xt(r,o){1&r&&t._UZ(0,"mat-row")}function Vt(r,o){if(1&r&&(t.TgZ(0,"div",33),t._uU(1),t.qZA()),2&r){const e=t.oxw();t.xp6(1),t.hij(" ",e.constants.NO_SUPPLIERS_FOUND," ")}}const $t=function(){return[5,10,20]};let te=(()=>{class r{constructor(e,n,s,l,M){this.location=e,this.route=n,this.storesService=s,this.suppliersService=l,this.addSupplierBottomSheet=M,this.dataSource=new c.by,this.constants=A,this.areSuppliersLoading=!0,this.userId="",this.storeId="",this.searchFormControl=new a.p4(""),this.dateRangeFormControl=new a.nJ({start:new a.p4(""),end:new a.p4("")}),this.searchSubject=new C.x,this.displayedColumns=["name","createdOn"],this.suppliersRequest={userId:"",searchTerm:"",orderBy:"name",isDescending:!1,dateAddedFrom:null,dateAddedTo:null,skip:0,take:5},this.initialSuppliersRequest={userId:"",searchTerm:"",orderBy:"name",isDescending:!1,dateAddedFrom:null,dateAddedTo:null,skip:0,take:5}}ngOnInit(){this.searchSubject.pipe((0,b.b)(800)).subscribe(e=>{this.search(e)}),this.storeId=this.route.snapshot.params.storeId,this.userId=this.route.snapshot.params.userId,this.initialSuppliersRequest.userId=this.userId,this.suppliersRequest={...this.initialSuppliersRequest},this.storesService.getStore(this.storeId).pipe((0,f.h)(e=>!!e),(0,h.P)()).subscribe(e=>this.store=e),this.getSuppliers(this.suppliersRequest)}onAddSupplier(){this.addSupplierBottomSheet.open(Yt,{data:{userId:this.userId}})}onSortChange(e){this.suppliersRequest={...this.initialSuppliersRequest,isDescending:"desc"===e.direction},this.getSuppliers(this.suppliersRequest),this.paginator.firstPage()}search(e){this.suppliersRequest={...this.initialSuppliersRequest,searchTerm:e},this.getSuppliers(this.suppliersRequest),this.paginator.firstPage()}filterByDate(){this.suppliersRequest={...this.initialSuppliersRequest,dateAddedFrom:this.dateRangeFormControl.controls.start.value,dateAddedTo:this.dateRangeFormControl.controls.end.value},this.getSuppliers(this.suppliersRequest),this.paginator.firstPage()}pageChanged(){this.suppliersRequest={...this.suppliersRequest,skip:this.paginator.pageIndex*this.paginator.pageSize,take:this.paginator.pageSize},this.getSuppliers(this.suppliersRequest)}goBack(){this.location.back()}onKeyUp(){this.searchSubject.next(this.searchFormControl.value)}getSuppliers(e){this.areSuppliersLoading=!0,this.suppliersService.getUserSuppliersPaged(e).pipe((0,f.h)(n=>!!n),(0,h.P)()).subscribe(n=>{this.areSuppliersLoading=!1,this.suppliers=n,this.dataSource.data=this.suppliers.items})}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(i.Ye),t.Y36(T.gz),t.Y36(J._),t.Y36(y),t.Y36(U.ch))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-suppliers-page"]],viewQuery:function(e,n){if(1&e&&t.Gf(Qt,7),2&e){let s;t.iGM(s=t.CRH())&&(n.paginator=s.first)}},decls:26,vars:17,consts:[[1,"orders-page-wrapper"],["mat-button","",1,"back-button",3,"click"],[1,"header-wrapper"],["class","title",4,"ngIf"],["mat-button","",3,"click"],[1,"table-wrapper"],["class","spinner-wrapper",4,"ngIf"],["matSort","",1,"table",3,"matSortActive","matSortDirection","matSortDisableClear","dataSource","matSortChange"],[3,"matColumnDef"],[4,"matHeaderCellDef"],[4,"matCellDef"],["class","date-header",4,"matHeaderCellDef"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["class","empty-state",4,"ngIf"],["showFirstLastButtons","",3,"length","pageSize","pageSizeOptions","page"],["paginator",""],[1,"title"],[1,"spinner-wrapper"],["diameter","100","color","accent"],[1,"name-header-cell"],["matInput","",3,"formControl","placeholder","keyup"],["mat-sort-header","",3,"arrowPosition"],[1,"date-header"],[3,"formGroup"],["appearance","fill",2,"width","170px"],[3,"rangePicker"],["matStartDate","","formControlName","start","placeholder","Date Added From"],["matEndDate","","formControlName","end","placeholder","Date Added To"],["matSuffix","",3,"for"],["dateRangePicker",""],["mat-mini-fab","",1,"button-filter-date"],["color","primary",1,"search-icon",3,"click"],[1,"empty-state"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"a",1),t.NdJ("click",function(){return n.goBack()}),t.TgZ(2,"mat-icon"),t._uU(3,"chevron_left"),t.qZA(),t._uU(4),t.qZA(),t.TgZ(5,"div",2),t.YNc(6,Kt,2,2,"h1",3),t.TgZ(7,"a",4),t.NdJ("click",function(){return n.onAddSupplier()}),t.TgZ(8,"mat-icon"),t._uU(9,"add"),t.qZA(),t._uU(10),t.qZA()(),t._UZ(11,"mat-divider"),t.TgZ(12,"div",5),t.YNc(13,Ft,2,0,"div",6),t.TgZ(14,"mat-table",7),t.NdJ("matSortChange",function(l){return n.onSortChange(l)}),t.ynx(15,8),t.YNc(16,Wt,6,4,"mat-header-cell",9),t.YNc(17,jt,2,1,"mat-cell",10),t.BQk(),t.ynx(18,8),t.YNc(19,Gt,19,6,"mat-header-cell",11),t.YNc(20,Ht,3,3,"mat-cell",10),t.BQk(),t.YNc(21,zt,1,0,"mat-header-row",12),t.YNc(22,Xt,1,0,"mat-row",13),t.qZA(),t.YNc(23,Vt,2,1,"div",14),t.TgZ(24,"mat-paginator",15,16),t.NdJ("page",function(){return n.pageChanged()}),t.qZA()()()),2&e&&(t.xp6(4),t.hij("",n.constants.GO_BACK," "),t.xp6(2),t.Q6J("ngIf",n.store),t.xp6(4),t.hij(" ",n.constants.ADD_SUPPLIER," "),t.xp6(3),t.Q6J("ngIf",n.areSuppliersLoading),t.xp6(1),t.Q6J("matSortActive","name")("matSortDirection","asc")("matSortDisableClear",!0)("dataSource",n.dataSource),t.xp6(1),t.Q6J("matColumnDef","name"),t.xp6(3),t.Q6J("matColumnDef","createdOn"),t.xp6(3),t.Q6J("matHeaderRowDef",n.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",n.displayedColumns),t.xp6(1),t.Q6J("ngIf",!n.suppliers||0===n.suppliers.items.length),t.xp6(1),t.Q6J("length",n.suppliers?n.suppliers.totalItemsCount:0)("pageSize",5)("pageSizeOptions",t.DdM(16,$t)))},dependencies:[i.O5,u.lW,u.zs,d.KE,d.bx,d.hX,d.R9,m.Nt,c.BZ,c.fO,c.as,c.w1,c.Dz,c.nj,c.ge,c.ev,c.XQ,c.Gk,P.NW,x.YE,x.nU,w.Ou,v.d,Z.Hw,a._Y,a.Fj,a.JJ,a.JL,a.oH,a.sg,a.u,E.nW,E.wx,E.zY,E.By,E._g,i.uU],styles:[".orders-page-wrapper[_ngcontent-%COMP%]{margin:20px auto auto;width:50%}.orders-page-wrapper[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]{margin-top:50px;margin-bottom:80px;border-radius:30px}.spinner-wrapper[_ngcontent-%COMP%]{position:absolute;height:38%;width:50%;background-color:#0000004d;display:flex;justify-content:center;align-items:center}.spinner-wrapper[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%]{position:sticky}.header-wrapper[_ngcontent-%COMP%]{margin-bottom:20px;display:flex;justify-content:space-between}.header-wrapper[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{margin:0}mat-divider[_ngcontent-%COMP%]{margin-bottom:20px}.empty-state[_ngcontent-%COMP%]{height:60px;background-color:#0000000d;text-align:center;line-height:60px}.name-header-cell[_ngcontent-%COMP%]{display:flex}.name-header-cell[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{text-align:center;line-height:60px;vertical-align:middle;margin-right:10px}.name-header-cell[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{margin-right:10px;width:150px}.date-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:start}.date-header[_ngcontent-%COMP%]   .search-icon[_ngcontent-%COMP%]{margin-left:10px}.date-header[_ngcontent-%COMP%]   .search-icon[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover{cursor:pointer}.button-filter-date[_ngcontent-%COMP%]{background-color:#0000;box-shadow:none!important}"]}),r})();const ee=["paginator"];function re(r,o){1&r&&(t.TgZ(0,"div",16),t._UZ(1,"mat-spinner",17),t.qZA())}function ne(r,o){if(1&r){const e=t.EpF();t.TgZ(0,"mat-header-cell")(1,"div",18)(2,"mat-form-field")(3,"input",19),t.NdJ("keyup",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.onKeyUp())}),t.qZA()(),t.TgZ(4,"div",20),t._uU(5),t.qZA()()()}if(2&r){const e=t.oxw();t.xp6(3),t.Q6J("formControl",e.searchFormControl)("placeholder",e.constants.SEARCH),t.xp6(1),t.Q6J("arrowPosition","before"),t.xp6(1),t.Oqu(e.constants.ORDER_NUMBER)}}function oe(r,o){if(1&r&&(t.TgZ(0,"mat-cell"),t._uU(1),t.qZA()),2&r){const e=o.$implicit;t.xp6(1),t.Oqu(e.orderNumber)}}function ae(r,o){if(1&r&&(t.TgZ(0,"mat-header-cell")(1,"div",18)(2,"div",20),t._uU(3),t.qZA()()()),2&r){const e=t.oxw();t.xp6(2),t.Q6J("arrowPosition","before"),t.xp6(1),t.Oqu(e.constants.STORE_NAME)}}function ie(r,o){if(1&r&&(t.TgZ(0,"mat-cell"),t._uU(1),t.qZA()),2&r){const e=o.$implicit;t.xp6(1),t.Oqu(e.storeName)}}function se(r,o){if(1&r){const e=t.EpF();t.TgZ(0,"mat-header-cell",21)(1,"div")(2,"div",20),t._uU(3),t.qZA()(),t.TgZ(4,"form",22)(5,"mat-form-field",23)(6,"mat-label"),t._uU(7),t.qZA(),t.TgZ(8,"mat-date-range-input",24),t._UZ(9,"input",25)(10,"input",26),t.qZA(),t.TgZ(11,"mat-hint"),t._uU(12,"MM/DD/YYYY \u2013 MM/DD/YYYY"),t.qZA(),t._UZ(13,"mat-datepicker-toggle",27)(14,"mat-date-range-picker",null,28),t.qZA(),t.TgZ(16,"button",29)(17,"mat-icon",30),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.filterByDate())}),t._uU(18,"search"),t.qZA()()()()}if(2&r){const e=t.MAs(15),n=t.oxw();t.xp6(2),t.Q6J("arrowPosition","before"),t.xp6(1),t.Oqu(n.constants.DATE_ADDED),t.xp6(1),t.Q6J("formGroup",n.dateRangeFormControl),t.xp6(3),t.Oqu(n.constants.PICK_DATE_RANGE),t.xp6(1),t.Q6J("rangePicker",e),t.xp6(5),t.Q6J("for",e)}}function _e(r,o){if(1&r&&(t.TgZ(0,"mat-cell"),t._uU(1),t.ALo(2,"date"),t.qZA()),2&r){const e=o.$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,e.createdOn))}}function ce(r,o){1&r&&t._UZ(0,"mat-header-row")}function pe(r,o){1&r&&t._UZ(0,"mat-row")}function de(r,o){if(1&r&&(t.TgZ(0,"div",31),t._uU(1),t.qZA()),2&r){const e=t.oxw();t.xp6(1),t.hij(" ",e.constants.NO_ORDERS_FOUND," ")}}const le=function(){return[5,10,20]};let ue=(()=>{class r{constructor(e,n,s){this.location=e,this.route=n,this.ordersService=s,this.constants=A,this.dataSource=new c.by,this.areOrdersLoading=!0,this.userId="",this.searchFormControl=new a.p4(""),this.dateRangeFormControl=new a.nJ({start:new a.p4(""),end:new a.p4("")}),this.searchSubject=new C.x,this.ordersRequest={userId:"",searchTerm:"",orderBy:"orderNumber",isDescending:!1,dateAddedFrom:null,dateAddedTo:null,skip:0,take:5},this.initialOrdersRequest={userId:"",searchTerm:"",orderBy:"orderNumber",isDescending:!1,dateAddedFrom:null,dateAddedTo:null,skip:0,take:5},this.displayedColumns=["orderNumber","storeName","createdOn"]}ngOnInit(){this.searchSubject.pipe((0,b.b)(800)).subscribe(e=>{this.search(e)}),this.userId=this.route.snapshot.params.userId,this.initialOrdersRequest.userId=this.userId,this.ordersRequest={...this.initialOrdersRequest},this.getAllOrders(this.ordersRequest)}onSortChange(e){this.ordersRequest={...this.initialOrdersRequest,isDescending:"desc"===e.direction},this.getAllOrders(this.ordersRequest),this.paginator.firstPage()}filterByDate(){this.ordersRequest={...this.initialOrdersRequest,dateAddedFrom:this.dateRangeFormControl.controls.start.value,dateAddedTo:this.dateRangeFormControl.controls.end.value},this.getAllOrders(this.ordersRequest),this.paginator.firstPage()}pageChanged(){this.ordersRequest={...this.ordersRequest,skip:this.paginator.pageIndex*this.paginator.pageSize,take:this.paginator.pageSize},this.getAllOrders(this.ordersRequest)}onKeyUp(){this.searchSubject.next(this.searchFormControl.value)}search(e){this.ordersRequest={...this.initialOrdersRequest,searchTerm:e},this.getAllOrders(this.ordersRequest),this.paginator.firstPage()}goBack(){this.location.back()}getAllOrders(e){this.areOrdersLoading=!0,this.ordersService.getUserOrders(e).pipe((0,f.h)(n=>!!n),(0,h.P)()).subscribe(n=>{this.areOrdersLoading=!1,this.orders=n,this.dataSource.data=this.orders.items})}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(i.Ye),t.Y36(T.gz),t.Y36(R))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-all-orders"]],viewQuery:function(e,n){if(1&e&&t.Gf(ee,7),2&e){let s;t.iGM(s=t.CRH())&&(n.paginator=s.first)}},decls:26,vars:17,consts:[[1,"orders-page-wrapper"],["mat-button","",1,"back-button",3,"click"],[1,"header-wrapper"],[1,"title"],[1,"table-wrapper"],["class","spinner-wrapper",4,"ngIf"],["matSort","",1,"table",3,"matSortActive","matSortDirection","matSortDisableClear","dataSource","matSortChange"],[3,"matColumnDef"],[4,"matHeaderCellDef"],[4,"matCellDef"],["class","date-header",4,"matHeaderCellDef"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["class","empty-state",4,"ngIf"],["showFirstLastButtons","",3,"length","pageSize","pageSizeOptions","page"],["paginator",""],[1,"spinner-wrapper"],["diameter","100","color","accent"],[1,"name-header-cell"],["matInput","",3,"formControl","placeholder","keyup"],["mat-sort-header","",3,"arrowPosition"],[1,"date-header"],[3,"formGroup"],["appearance","fill",2,"width","170px"],[3,"rangePicker"],["matStartDate","","formControlName","start","placeholder","Date Added From"],["matEndDate","","formControlName","end","placeholder","Date Added To"],["matSuffix","",3,"for"],["dateRangePicker",""],["mat-mini-fab","",1,"button-filter-date"],["color","primary",1,"search-icon",3,"click"],[1,"empty-state"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"a",1),t.NdJ("click",function(){return n.goBack()}),t.TgZ(2,"mat-icon"),t._uU(3,"chevron_left"),t.qZA(),t._uU(4),t.qZA(),t.TgZ(5,"div",2)(6,"h1",3),t._uU(7),t.qZA()(),t._UZ(8,"mat-divider"),t.TgZ(9,"div",4),t.YNc(10,re,2,0,"div",5),t.TgZ(11,"mat-table",6),t.NdJ("matSortChange",function(l){return n.onSortChange(l)}),t.ynx(12,7),t.YNc(13,ne,6,4,"mat-header-cell",8),t.YNc(14,oe,2,1,"mat-cell",9),t.BQk(),t.ynx(15,7),t.YNc(16,ae,4,2,"mat-header-cell",8),t.YNc(17,ie,2,1,"mat-cell",9),t.BQk(),t.ynx(18,7),t.YNc(19,se,19,6,"mat-header-cell",10),t.YNc(20,_e,3,3,"mat-cell",9),t.BQk(),t.YNc(21,ce,1,0,"mat-header-row",11),t.YNc(22,pe,1,0,"mat-row",12),t.qZA(),t.YNc(23,de,2,1,"div",13),t.TgZ(24,"mat-paginator",14,15),t.NdJ("page",function(){return n.pageChanged()}),t.qZA()()()),2&e&&(t.xp6(4),t.hij("",n.constants.GO_BACK," "),t.xp6(3),t.Oqu(n.constants.ORDERS),t.xp6(3),t.Q6J("ngIf",n.areOrdersLoading),t.xp6(1),t.Q6J("matSortActive","orderNumber")("matSortDirection","asc")("matSortDisableClear",!0)("dataSource",n.dataSource),t.xp6(1),t.Q6J("matColumnDef","orderNumber"),t.xp6(3),t.Q6J("matColumnDef","storeName"),t.xp6(3),t.Q6J("matColumnDef","createdOn"),t.xp6(3),t.Q6J("matHeaderRowDef",n.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",n.displayedColumns),t.xp6(1),t.Q6J("ngIf",!n.orders||0===n.orders.items.length),t.xp6(1),t.Q6J("length",n.orders?n.orders.totalItemsCount:0)("pageSize",5)("pageSizeOptions",t.DdM(16,le)))},dependencies:[i.O5,u.lW,u.zs,d.KE,d.bx,d.hX,d.R9,m.Nt,c.BZ,c.fO,c.as,c.w1,c.Dz,c.nj,c.ge,c.ev,c.XQ,c.Gk,P.NW,x.YE,x.nU,w.Ou,v.d,Z.Hw,a._Y,a.Fj,a.JJ,a.JL,a.oH,a.sg,a.u,E.nW,E.wx,E.zY,E.By,E._g,i.uU],styles:[".orders-page-wrapper[_ngcontent-%COMP%]{margin:20px auto auto;width:50%}.orders-page-wrapper[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]{margin-top:50px;margin-bottom:80px;border-radius:30px}.spinner-wrapper[_ngcontent-%COMP%]{position:absolute;height:38%;width:50%;background-color:#0000004d;display:flex;justify-content:center;align-items:center}.spinner-wrapper[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%]{position:sticky}.header-wrapper[_ngcontent-%COMP%]{margin-bottom:20px;display:flex;justify-content:space-between}.header-wrapper[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{margin:0}mat-divider[_ngcontent-%COMP%]{margin-bottom:20px}.empty-state[_ngcontent-%COMP%]{height:60px;background-color:#0000000d;text-align:center;line-height:60px}.name-header-cell[_ngcontent-%COMP%]{display:flex}.name-header-cell[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{text-align:center;line-height:60px;vertical-align:middle;margin-right:10px}.name-header-cell[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{margin-right:10px;width:150px}.date-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:start}.date-header[_ngcontent-%COMP%]   .search-icon[_ngcontent-%COMP%]{margin-left:10px}.date-header[_ngcontent-%COMP%]   .search-icon[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover{cursor:pointer}.button-filter-date[_ngcontent-%COMP%]{background-color:#0000;box-shadow:none!important}"]}),r})();var j=_(7601);function me(r,o){if(1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&r){const e=t.oxw();t.xp6(1),t.hij(" ",e.constants.INVALID_EMAIL," ")}}function ge(r,o){if(1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&r){const e=t.oxw();t.xp6(1),t.hij(" ",e.constants.FIELD_REQUIRED," ")}}function he(r,o){if(1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&r){const e=t.oxw();t.xp6(1),t.hij(" ",e.constants.FIELD_REQUIRED," ")}}let fe=(()=>{class r{constructor(e,n,s,l){this.route=e,this.router=n,this.accountsService=s,this.location=l,this.constants=A,this.showPassword=!1,this.userId="",this.form=new a.nJ({email:new a.p4("",[a.kI.required,a.kI.email]),userName:new a.p4("",a.kI.required)})}ngOnInit(){this.userId=this.route.snapshot.params.userId,this.accountsService.getUser(this.userId).pipe((0,f.h)(e=>!!e),(0,h.P)()).subscribe(e=>{this.user=e,this.form.controls.email.setValue(this.user.email),this.form.controls.userName.setValue(this.user.userName)})}updateUser(){this.accountsService.updateUser(this.userId,this.form.controls.email.value,this.form.controls.userName.value).pipe((0,h.P)()).subscribe(s=>{this.router.navigate(["/user",this.userId])})}goBack(){this.location.back()}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(T.gz),t.Y36(T.F0),t.Y36(j.i),t.Y36(i.Ye))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-account-settings-page"]],decls:31,vars:10,consts:[[1,"go-back-button-wrapper"],["mat-button","",1,"back-button",3,"click"],[1,"form-wrapper"],[2,"margin-bottom","10px"],[3,"formGroup"],[1,"field"],["appearance","outline"],["matInput","","formControlName","email"],[4,"ngIf"],["color","primary",1,"fields-icon"],["appearance","outline",2,"width","200px"],["matInput","","formControlName","userName"],[1,"button-wrapper"],["mat-raised-button","","color","primary",3,"disabled","click"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"a",1),t.NdJ("click",function(){return n.goBack()}),t.TgZ(2,"mat-icon"),t._uU(3,"chevron_left"),t.qZA(),t._uU(4),t.qZA()(),t.TgZ(5,"div",2)(6,"h1"),t._uU(7),t.qZA(),t._UZ(8,"mat-divider",3),t.TgZ(9,"form",4)(10,"div",5)(11,"mat-form-field",6)(12,"mat-label"),t._uU(13),t.qZA(),t._UZ(14,"input",7),t.YNc(15,me,2,1,"mat-error",8),t.YNc(16,ge,2,1,"mat-error",8),t.qZA(),t.TgZ(17,"mat-icon",9),t._uU(18,"mail"),t.qZA()(),t.TgZ(19,"div",5)(20,"mat-form-field",10)(21,"mat-label"),t._uU(22),t.qZA(),t._UZ(23,"input",11),t.YNc(24,he,2,1,"mat-error",8),t.qZA(),t.TgZ(25,"mat-icon",9),t._uU(26,"badge"),t.qZA()(),t._UZ(27,"mat-divider"),t.TgZ(28,"div",12)(29,"button",13),t.NdJ("click",function(){return n.updateUser()}),t._uU(30),t.qZA()()()()),2&e&&(t.xp6(4),t.hij("",n.constants.GO_BACK," "),t.xp6(3),t.Oqu(n.constants.ACCOUNT_SETTINGS),t.xp6(2),t.Q6J("formGroup",n.form),t.xp6(4),t.Oqu(n.constants.EMAIL),t.xp6(2),t.Q6J("ngIf",n.form.controls.email.hasError("email")&&!n.form.controls.email.hasError("required")),t.xp6(1),t.Q6J("ngIf",n.form.controls.email.hasError("required")),t.xp6(6),t.Oqu(n.constants.USERNAME),t.xp6(2),t.Q6J("ngIf",n.form.controls.userName.hasError("required")),t.xp6(5),t.Q6J("disabled",!n.form.valid),t.xp6(1),t.Oqu(n.constants.UPDATE_USER))},dependencies:[i.O5,u.lW,u.zs,d.TO,d.KE,d.hX,m.Nt,v.d,Z.Hw,a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u],styles:[".form-wrapper[_ngcontent-%COMP%]{border:solid 2px rgba(0,0,0,.3);border-radius:10px;padding:30px;box-shadow:3px 3px 1px 3px #888;margin:160px auto auto;width:-moz-fit-content;width:fit-content}.form-wrapper[_ngcontent-%COMP%]   .button-wrapper[_ngcontent-%COMP%]{margin-top:10px;margin-left:10px}.form-wrapper[_ngcontent-%COMP%]   .button-wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block}.field[_ngcontent-%COMP%]{padding-left:11px}.fields-icon[_ngcontent-%COMP%]{margin-left:24px}.back-button[_ngcontent-%COMP%]{margin-top:50px;border-radius:30px;margin-left:30%}"]}),r})();function Oe(r,o){if(1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&r){const e=t.oxw();t.xp6(1),t.hij(" ",e.constants.FIELD_REQUIRED," ")}}function Pe(r,o){if(1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&r){const e=t.oxw();t.xp6(1),t.hij(" ",e.constants.INVALID_EMAIL," ")}}function Ce(r,o){if(1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&r){const e=t.oxw();t.xp6(1),t.hij(" ",e.constants.FIELD_REQUIRED," ")}}function Te(r,o){if(1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&r){const e=t.oxw();t.xp6(1),t.hij(" ",e.constants.FIELD_REQUIRED," ")}}function Ae(r,o){if(1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&r){const e=t.oxw();t.xp6(1),t.hij(" ",e.constants.INVALID_PASSWORD," ")}}function Ee(r,o){if(1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&r){const e=t.oxw();t.xp6(1),t.hij(" ",e.constants.PASSWORDS_DONT_MATCH," ")}}let xe=(()=>{class r{constructor(e,n,s){this.accountsService=e,this.bottomSheetRef=n,this.data=s,this.constants=A,this.showPassword=!1,this.showConfirmPassword=!1,this.passwordMatchValidator=l=>l.get("password")?.value===l.get("confirmPassword")?.value?null:{passwordMismatch:!0},this.form=new a.nJ({username:new a.p4("",a.kI.required),email:new a.p4("",[a.kI.required,a.kI.email]),password:new a.p4("",[a.kI.required,a.kI.pattern(this.constants.PASSWORD_VALIDATION_PATTERN)]),confirmPassword:new a.p4("",a.kI.required)},{validators:this.passwordMatchValidator})}get password(){return this.form.get("password")}get confirmPassword(){return this.form.get("confirmPassword")}ngOnInit(){}togglePasswordVisibility(){this.showPassword=!this.showPassword}toggleConfirmPasswordVisibility(){this.showConfirmPassword=!this.showConfirmPassword}onPasswordInput(){this.form.hasError("passwordMismatch")?this.confirmPassword?.setErrors([{passwordMismatch:!0}]):this.confirmPassword?.setErrors(null)}registerCashier(){this.accountsService.registerCashier({storeId:this.data.storeId,userName:this.form.value.username,email:this.form.value.email,password:this.form.value.password,confirmPassword:this.form.value.confirmPassword}).pipe((0,f.h)(n=>!!n),(0,h.P)()).subscribe(),this.bottomSheetRef.dismiss()}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(j.i),t.Y36(U.oL),t.Y36(U.OG))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-add-cashier"]],decls:48,vars:18,consts:[[1,"form-wrapper"],[3,"formGroup"],[1,"field"],["appearance","outline"],["matInput","","formControlName","username"],[4,"ngIf"],["color","primary",1,"fields-icon"],["matInput","","formControlName","email"],[1,"passwords-wrapper"],["appearance","outline",1,"password-field"],["matInput","","formControlName","password",3,"type"],["matSuffix","",1,"suffix-wrapper"],["color","primary",1,"btn",3,"click"],["color","primary",2,"margin-top","12px"],["appearance","outline",1,"password-field",2,"margin-left","24px"],["matInput","","formControlName","confirmPassword",3,"type","input"],[2,"margin-top","10px"],[1,"button-wrapper"],["mat-raised-button","","color","primary",3,"disabled","click"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"h1"),t._uU(2),t.qZA(),t._UZ(3,"mat-divider"),t.TgZ(4,"form",1)(5,"div",2)(6,"mat-form-field",3)(7,"mat-label"),t._uU(8),t.qZA(),t._UZ(9,"input",4),t.YNc(10,Oe,2,1,"mat-error",5),t.qZA(),t.TgZ(11,"mat-icon",6),t._uU(12,"person"),t.qZA()(),t.TgZ(13,"div",2)(14,"mat-form-field",3)(15,"mat-label"),t._uU(16),t.qZA(),t._UZ(17,"input",7),t.YNc(18,Pe,2,1,"mat-error",5),t.YNc(19,Ce,2,1,"mat-error",5),t.qZA(),t.TgZ(20,"mat-icon",6),t._uU(21,"mail"),t.qZA()(),t.TgZ(22,"div",8)(23,"div")(24,"mat-form-field",9)(25,"mat-label"),t._uU(26),t.qZA(),t._UZ(27,"input",10),t.YNc(28,Te,2,1,"mat-error",5),t.YNc(29,Ae,2,1,"mat-error",5),t.TgZ(30,"div",11)(31,"mat-icon",12),t.NdJ("click",function(){return n.togglePasswordVisibility()}),t._uU(32),t.qZA()()()(),t.TgZ(33,"mat-icon",13),t._uU(34,"password"),t.qZA(),t.TgZ(35,"div")(36,"mat-form-field",14)(37,"mat-label"),t._uU(38),t.qZA(),t.TgZ(39,"input",15),t.NdJ("input",function(){return n.onPasswordInput()}),t.qZA(),t.YNc(40,Ee,2,1,"mat-error",5),t.TgZ(41,"div",11)(42,"mat-icon",12),t.NdJ("click",function(){return n.toggleConfirmPasswordVisibility()}),t._uU(43),t.qZA()()()()(),t._UZ(44,"mat-divider",16),t.TgZ(45,"div",17)(46,"button",18),t.NdJ("click",function(){return n.registerCashier()}),t._uU(47),t.qZA()()()()),2&e&&(t.xp6(2),t.Oqu(n.constants.REGISTER_CASHIER),t.xp6(2),t.Q6J("formGroup",n.form),t.xp6(4),t.Oqu(n.constants.USERNAME),t.xp6(2),t.Q6J("ngIf",n.form.controls.username.hasError("required")),t.xp6(6),t.Oqu(n.constants.EMAIL),t.xp6(2),t.Q6J("ngIf",n.form.controls.email.hasError("email")&&!n.form.controls.email.hasError("required")),t.xp6(1),t.Q6J("ngIf",n.form.controls.email.hasError("required")),t.xp6(7),t.Oqu(n.constants.PASSWORD),t.xp6(1),t.Q6J("type",n.showPassword?"text":"password"),t.xp6(1),t.Q6J("ngIf",n.form.controls.password.hasError("required")),t.xp6(1),t.Q6J("ngIf",!n.form.controls.password.hasError("required")&&n.form.controls.password.hasError("pattern")),t.xp6(3),t.Oqu(n.showPassword?"visibility_off":"visibility"),t.xp6(6),t.Oqu(n.constants.CONFIRM_PASSWORD),t.xp6(1),t.Q6J("type",n.showConfirmPassword?"text":"password"),t.xp6(1),t.Q6J("ngIf",null==n.confirmPassword?null:n.confirmPassword.invalid),t.xp6(3),t.Oqu(n.showConfirmPassword?"visibility_off":"visibility"),t.xp6(3),t.Q6J("disabled",!n.form.valid),t.xp6(1),t.Oqu(n.constants.REGISTER_CASHIER))},dependencies:[i.O5,u.lW,d.TO,d.KE,d.hX,d.R9,m.Nt,v.d,Z.Hw,a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u],styles:[".form-wrapper[_ngcontent-%COMP%]{margin:15px;width:-moz-fit-content;width:fit-content}.form-wrapper[_ngcontent-%COMP%]   .passwords-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:10px;height:120px;border:solid 2px rgba(0,0,0,.3);border-radius:10px;box-shadow:3px 3px 1px 3px #888}.form-wrapper[_ngcontent-%COMP%]   .passwords-wrapper[_ngcontent-%COMP%]   .password-field[_ngcontent-%COMP%]{width:89%}.form-wrapper[_ngcontent-%COMP%]   .button-wrapper[_ngcontent-%COMP%]{margin-top:10px;margin-left:10px}.field[_ngcontent-%COMP%]{padding-left:11px}.fields-icon[_ngcontent-%COMP%]{margin-left:24px}mat-divider[_ngcontent-%COMP%]{margin-bottom:10px}"]}),r})();var Me=_(7009);function De(r,o){if(1&r&&(t.TgZ(0,"mat-list-item",19)(1,"p"),t._uU(2),t.qZA()()),2&r){const e=o.$implicit,n=t.oxw();t.xp6(2),t.lnq("",e.name,": ",e.plusQuantity?e.plusQuantity:0," ",n.getUnitTypeString(e.measurementUnit),"")}}function ve(r,o){if(1&r&&(t.TgZ(0,"mat-option",20),t._uU(1),t.qZA()),2&r){const e=o.$implicit;t.Q6J("value",e),t.xp6(1),t.Oqu(e.name)}}function Ze(r,o){if(1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&r){const e=t.oxw();t.xp6(1),t.Oqu(e.constants.NOT_ENOUGH_PRODUCTS_IN_STORE)}}let Ue=(()=>{class r{constructor(e,n,s,l,M){this.location=e,this.productsService=n,this.route=s,this.snackBar=l,this.bottomSheet=M,this.constants=A,this.saleProducts=[],this.products=[],this.storeId="",this.saleForm=new a.nJ({existingProduct:new a.p4(""),sellQuantity:new a.p4("")})}ngOnInit(){this.storeId=this.route.snapshot.params.storeId,this.productsService.getStoreAddProducts(this.storeId).pipe((0,f.h)(e=>!!e),(0,h.P)()).subscribe(e=>this.products=e)}addProductToList(){const e=this.saleForm.controls.existingProduct.value,s=Number(this.saleForm.controls.sellQuantity.value);e.plusQuantity=s,this.saleProducts.push(e),this.saleForm.controls.existingProduct.setValue("")}getUnitTypeString(e){let n="";switch(S[e]){case"SingularPiece":n="pieces";break;case"Kilogram":n="kg";break;case"Litre":n="l";break;case"Metre":n="m"}return n}getBillValue(){let e=0;for(const n of this.saleProducts)e+=n.price*n.plusQuantity;return e}makeASale(){this.productsService.sellProducts({storeId:this.storeId,products:this.saleProducts}).pipe((0,f.h)(n=>!!n),(0,h.P)()).subscribe(n=>{n?this.saleProducts=[]:this.snackBar.open(A.SOMETHING_WENT_WRONG,A.CLOSE,{horizontalPosition:"center",verticalPosition:"bottom"})})}addCashier(){this.bottomSheet.open(xe,{data:{storeId:this.storeId}})}goBack(){this.location.back()}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(i.Ye),t.Y36(B),t.Y36(T.gz),t.Y36(Me.ux),t.Y36(U.ch))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-sales-page"]],decls:39,vars:14,consts:[[1,"sales-page-wrapper"],["mat-button","",1,"back-button",3,"click"],[1,"header-wrapper"],[1,"title"],["mat-button","",3,"click"],[1,"products-wrapper"],["role","list",1,"products-list"],["role","listitem",4,"ngFor","ngForOf"],[2,"margin-bottom","10px"],[3,"formGroup"],[1,"field"],["appearance","outline"],["formControlName","existingProduct",1,"product-field"],[3,"value",4,"ngFor","ngForOf"],["matInput","","type","number","formControlName","sellQuantity"],[4,"ngIf"],[2,"text-align","end"],["color","primary","mat-button","",3,"disabled","click"],["mat-button","","color","primary",3,"disabled","click"],["role","listitem"],[3,"value"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"a",1),t.NdJ("click",function(){return n.goBack()}),t.TgZ(2,"mat-icon"),t._uU(3,"chevron_left"),t.qZA(),t._uU(4),t.qZA(),t.TgZ(5,"div",2)(6,"h1",3),t._uU(7),t.qZA(),t.TgZ(8,"a",4),t.NdJ("click",function(){return n.addCashier()}),t.TgZ(9,"mat-icon"),t._uU(10,"badge"),t.qZA(),t._uU(11),t.qZA()(),t._UZ(12,"mat-divider"),t.TgZ(13,"div",5)(14,"mat-list",6),t.YNc(15,De,3,3,"mat-list-item",7),t.qZA(),t._UZ(16,"mat-divider",8),t.TgZ(17,"div")(18,"form",9)(19,"div",10)(20,"mat-form-field",11)(21,"mat-select",12),t.YNc(22,ve,2,2,"mat-option",13),t.qZA()()(),t.TgZ(23,"div",10)(24,"mat-form-field",11)(25,"mat-label"),t._uU(26),t.qZA(),t._UZ(27,"input",14),t.YNc(28,Ze,2,1,"mat-error",15),t.qZA()()()(),t._UZ(29,"mat-divider"),t.TgZ(30,"h4",16)(31,"b"),t._uU(32),t.qZA()(),t.TgZ(33,"a",17),t.NdJ("click",function(){return n.addProductToList()}),t.TgZ(34,"mat-icon"),t._uU(35,"add"),t.qZA(),t._uU(36),t.qZA()(),t.TgZ(37,"button",18),t.NdJ("click",function(){return n.makeASale()}),t._uU(38),t.qZA()()),2&e&&(t.xp6(4),t.hij("",n.constants.GO_BACK," "),t.xp6(3),t.Oqu(n.constants.SALES),t.xp6(4),t.hij(" ",n.constants.ADD_CASHIER," "),t.xp6(4),t.Q6J("ngForOf",n.saleProducts),t.xp6(3),t.Q6J("formGroup",n.saleForm),t.xp6(4),t.Q6J("ngForOf",n.products),t.xp6(4),t.Oqu(n.constants.ADD_QUANTITY),t.xp6(2),t.Q6J("ngIf",n.saleForm.controls.existingProduct.value.quantity<n.saleForm.controls.sellQuantity.value),t.xp6(4),t.AsE("",n.constants.BILL,": ",n.getBillValue(),"$"),t.xp6(1),t.Q6J("disabled",n.saleForm.controls.existingProduct.value.quantity<n.saleForm.controls.sellQuantity.value),t.xp6(3),t.hij(" ",n.constants.ADD_PRODUCT," "),t.xp6(1),t.Q6J("disabled",0===n.saleProducts.length),t.xp6(1),t.Oqu(n.constants.SELL))},dependencies:[i.sg,i.O5,u.lW,u.zs,d.TO,d.KE,d.hX,m.Nt,v.d,Z.Hw,F.gD,W.ey,a._Y,a.Fj,a.wV,a.JJ,a.JL,a.sg,a.u,Q.i$,Q.Tg],styles:[".sales-page-wrapper[_ngcontent-%COMP%]{margin:20px auto auto;width:50%}.sales-page-wrapper[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]{margin-top:50px;margin-bottom:80px;border-radius:30px}.header-wrapper[_ngcontent-%COMP%]{margin-bottom:20px;display:flex;justify-content:space-between}.header-wrapper[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{margin:0}.products-list[_ngcontent-%COMP%]{min-height:50px;max-height:200px;overflow-y:scroll}"]}),r})(),be=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[i.ez,T.Bz.forChild([{path:"",children:[{path:"",component:q.c},{path:"account-settings",component:fe},{path:"all-orders",component:ue},{path:"store/:storeId",component:dt},{path:"store/:storeId/orders",component:Lt},{path:"store/:storeId/suppliers",component:te},{path:"store/:storeId/sales",component:Ue}]}]),p.m]}),r})()},6588:(g,O,_)=>{_.d(O,{_:()=>T});var i=_(2779),p=_(4650),q=_(529);let T=(()=>{class a{constructor(C){this.http=C,this.httpExcelOptions={headers:{"Content-Type":"application/json"},observe:"response",responseType:"blob",params:{}}}getUserStores(C){return this.http.get(i.U2,{params:{userId:C}})}getStore(C){return this.http.get(i.RW,{params:{storeId:C}})}addStore(C){return this.http.post(i.r0,C)}exportReport(C){return this.httpExcelOptions.params={storeId:C},this.http.get(i.mk,this.httpExcelOptions)}}return a.\u0275fac=function(C){return new(C||a)(p.LFG(q.eN))},a.\u0275prov=p.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})()}}]);